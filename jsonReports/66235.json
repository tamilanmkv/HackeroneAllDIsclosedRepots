{"id":66235,"global_id":"Z2lkOi8vaGFja2Vyb25lL1JlcG9ydC82NjIzNQ==","url":"https://hackerone.com/reports/66235","title":"Уязвимость в Указание мест на фото + фича + хакинг","state":"Closed","substate":"resolved","readable_substate":"Resolved","created_at":"2015-06-06T01:24:11.281Z","submitted_at":"2015-06-06T01:24:11.281Z","is_member_of_team?":false,"reporter":{"disabled":false,"username":"pisarenko","url":"/pisarenko","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/032/169/02091ea1cab383fe7cf3c6240f602dcdbf1f6f6f_original.jpg/43e4513b9104ea0d68c9c096cea374ba8440dde3e027af5465c8771e8839a67c"},"is_me?":false,"cleared":false,"hackerone_triager":false,"hacker_mediation":false},"team":{"id":1254,"url":"https://hackerone.com/vkcom","handle":"vkcom","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/001/254/4d3964b90290d02f3b41d23a1452c08ca77eec3e_original.png/43e4513b9104ea0d68c9c096cea374ba8440dde3e027af5465c8771e8839a67c","medium":"https://profile-photos.hackerone-user-content.com/variants/000/001/254/4d3964b90290d02f3b41d23a1452c08ca77eec3e_original.png/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"permissions":[],"submission_state":"open","default_currency":"usd","awards_miles":false,"offers_bounties":true,"state":"public_mode","only_cleared_hackers":false,"pentest_feature_enabled?":false,"profile":{"name":"VK.com","twitter_handle":"vkontakte","website":"https://vk.com","about":"VK is the largest European social network with more than a 100 million active users."}},"has_bounty?":true,"in_validation?":false,"rejected_anc_report_that_can_be_sent_back_to_anc_triagers?":false,"can_view_team":true,"can_view_report":true,"is_external_bug":false,"is_published":false,"is_participant":false,"has_collaborators":false,"stage":4,"public":true,"visibility":"full","cve_ids":[],"singular_disclosure_disabled":false,"disclosed_at":"2015-09-07T15:53:07.286Z","bug_reporter_agreed_on_going_public_at":"2015-08-08T15:53:04.086Z","team_member_agreed_on_going_public_at":null,"comments_closed?":false,"facebook_team?":false,"team_private?":false,"vulnerability_information":"Для начало прошу прощения за столько много выделенных ТИПОВ ...\r\n(коротко с помощью уязвимости можно ставить отметку на фото гео лакации любому пользователю)\r\n\r\nСледование этому пожеланию увеличит вероятность получения награды.\r\n\r\nСервис, в котором найдена уязвимость.\r\nhttps:/vk.com/al_places.php\r\nhttp://vk.com/al_photos.php\r\n+ код Олега у каждого пользователя вк (его альбом)\r\n\r\nТип уязвимости.\r\nХранение hash в открытом доступе и следовательно\r\nПри правильном запросе можно поставить любому пользователю (гео) метку на фотографию \r\n(это уже какой-то хакинг =) ) \r\nВсе находится в открытом доступе, как всегда у вас =) \r\n\r\nКак можно проэксплуатировать.\r\nПоказано на видео прикрепил оригинал видео залил на yandex disk и на youtube ссылки:\r\nhttps://yadi.sk/i/XnUy08vIh7Ecf\r\nhttps://youtu.be/SZGu2Nd-QOk\r\n\r\nКак повторить.\r\nВыбираете любого пользователя , выбираете любое его фото и копируете часть из ссылки на фото\r\n(например 307707832_367700640)\r\n\r\nДалее нам понадобится ссылка для получение hash фотографии пользователя\r\nДля этого нам нужна ссылка https:/vk.com/al_places.php?act=show_photo_place\u0026al=1\u0026edit=1\u0026photo=ХХХХ_ХХ\r\nгде хххх_хх это ссылка на фото в виде ( 307707832_367700640 )\r\nПосылаем запрос (как пример)\r\nhttps:/vk.com/al_places.php?act=show_photo_place\u0026al=1\u0026edit=1\u0026photo=307707832_367700640\r\nПросматриваем код страницы , находим там hash\r\n\r\nТеперь чтобы создать метку у пользователя на фото , нам понадобится ссылка\r\nhttp://vk.com/al_photos.php?act=do_edit_place\u0026al=1\u0026hash=ТУТХЕШ\u0026lat=0.7031073524364909\u0026long=16.875\u0026photo=ТУТФОТОФОРМАТАххх_ххх\r\n\r\nПосылаем запрос (как пример)\r\nhttp://vk.com/al_photos.php?act=do_edit_place\u0026al=1\u0026hash=0268f5b2baab24d032\u0026lat=0.7031073524364909\u0026long=16.875\u0026photo=307707832_367700640\r\n\r\nНам вернется ошибка , следовательно если пользователь ее откроет которому принадлежит фото , то метка появится ! Отсылаем пользователю ссылку он ее открывает и мы радуемся (грустим конечно)\r\n\r\nЧтобы пользователь нечего не спалил можно сделать следующем образом создать страничку с iframe вставить туда эту ссылку и код на перенаправление на вк.ком через 5 секунд к примеру и воуля . Кидаем эту страничку в интернете пользователю он открывает отсылается обратно в вк и нечего не подозревает =)) \r\n\r\nДа в видео еще показано вначале , если вы не смотрите -\r\n ОЛЕГ И. ЗАБЫЛ СВОЙ АЛЬБОМ У ПОЛЬЗОВАТЕЛЕЙ НА СТРАНИЧКАХ =)\r\n\r\nКак исправить, с вашей точки зрения.\r\nПроверку на принадлежит ли фото пользователю введите в метод ( if else ) \r\n(да у меня все проблемы так решаются)\r\n","bounty_amount":"200.0","formatted_bounty":"$200","weakness":{"id":70,"name":"Code Injection"},"original_report_id":null,"original_report_url":null,"attachments":[],"allow_singular_disclosure_at":"2015-09-07T15:53:04.651Z","allow_singular_disclosure_after":-192324161.20024154,"singular_disclosure_allowed":true,"vote_count":2,"voters":["pekafat","pisarenko"],"structured_scope":null,"abilities":{"assignable_team_members":[],"assignable_team_member_groups":[]},"activities":[{"id":492516,"is_internal":false,"editable":false,"type":"Activities::BugResolved","message":"Проверьте, пожалуйста. Нам кажется, что уязвимость закрыта.","automated_response":false,"created_at":"2015-06-26T12:51:06.028Z","updated_at":"2015-06-26T12:51:06.028Z","actor":{"username":"mihver1","cleared":false,"url":"/mihver1","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":false},"reporter":{"username":"pisarenko","url":"/pisarenko"},"genius_execution_id":null,"team_handle":"vkcom","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":492519,"is_internal":false,"editable":false,"type":"Activities::BountyAwarded","message":"Это не очень опасный csrf, оттого и всего $200, но количество переходит в качество, несите еще :)","automated_response":false,"created_at":"2015-06-26T12:51:46.879Z","updated_at":"2015-06-26T12:51:46.879Z","actor":{"url":"/vkcom","ibb":false,"profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/001/254/4d3964b90290d02f3b41d23a1452c08ca77eec3e_original.png/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"profile":{"name":"VK.com"}},"bounty_amount":"200.0","bounty_currency":"usd","genius_execution_id":null,"team_handle":"vkcom","collaborator":{"username":"pisarenko","url":"/pisarenko"},"actor_is_team_member":true,"actor_is_concealed_member":false},{"id":492775,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"спасибо за вознаграждение  (вроде пофиксили)","automated_response":false,"created_at":"2015-06-26T16:34:31.979Z","updated_at":"2015-06-26T16:34:31.979Z","actor":{"username":"pisarenko","cleared":false,"url":"/pisarenko","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/032/169/02091ea1cab383fe7cf3c6240f602dcdbf1f6f6f_original.jpg/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"vkcom","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":492914,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Ой я вам такое видео записал , как создавать фотографии у пользователя без его ведома (ему достаточно перейти на сайт будет) Репорт кину в https://hackerone.com/reports/71690 (в видео просто про тот репорт тоже будет)","automated_response":false,"created_at":"2015-06-26T17:47:31.016Z","updated_at":"2015-06-26T17:47:31.016Z","actor":{"username":"pisarenko","cleared":false,"url":"/pisarenko","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/032/169/02091ea1cab383fe7cf3c6240f602dcdbf1f6f6f_original.jpg/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"vkcom","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":541498,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"public please","automated_response":false,"created_at":"2015-08-08T15:53:04.123Z","updated_at":"2015-08-08T15:53:04.123Z","first_to_agree":true,"actor":{"username":"pisarenko","cleared":false,"url":"/pisarenko","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/032/169/02091ea1cab383fe7cf3c6240f602dcdbf1f6f6f_original.jpg/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"vkcom","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":579937,"is_internal":false,"editable":false,"type":"Activities::ReportBecamePublic","message":"","automated_response":false,"created_at":"2015-09-07T15:53:07.940Z","updated_at":"2015-09-07T15:53:07.940Z","actor":{"url":"/vkcom","ibb":false,"profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/001/254/4d3964b90290d02f3b41d23a1452c08ca77eec3e_original.png/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"profile":{"name":"VK.com"}},"genius_execution_id":null,"team_handle":"vkcom","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":825438,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"С ВЕСНОЙ ВАС , МАРТ НА ДВОРЕ , но репорты закрывают не по очереди , а рандомно ! У меня открыты с того года , но закрывают пользователей которые только что зарегистрировались на проекте . Ну что же ...\nНе ответа ни привета , но если вас все же заинтересует ... \n(не много изменил названия репортов , но смысл не меняется , чтобы другие не сразу нашли) Но если найдут , пусть пользуются .\n\nhttps://hackerone.com/reports/119504 - Просмотр фотографий в закрытых и частных группах вк!\n\nhttps://hackerone.com/reports/106806 CSRF - с меню пользователя\n\nhttps://hackerone.com/reports/106179 - Уязвимость дает возможность видеть некоторую информацию , которую предлагают пабликам (до их публикации) , а так же видеть кто предлагает ее / автора .\n\nhttps://hackerone.com/reports/92113 - Уязвимость дает возможность смотреть кто лайкал приватную информацию (фото видео стена и тд)\n\nhttps://hackerone.com/reports/114528 - Не удаляемый пост со стены пользователя (+ spoofing наш текст в посте)\n\nhttps://hackerone.com/reports/115513 - Получение записей с замороженных и заблокированных страниц вконтакте (удаленных)\n\nhttps://hackerone.com/reports/64952 - Ошибка vkmessenger.com (уязвимость) (майский репорт)\n\nhttps://hackerone.com/reports/92215 - Уязвимость в товарах прикрепляем к  сообщению товар (пользователь не видит до отправки его)\n\nhttps://hackerone.com/reports/107877 - баг дающий возможность Бесконечно звонить . Считаю недостаточной проверку на капчу и лимиты.\n\nhttps://hackerone.com/reports/77418 - Уязвимость Приватность видео вк\n\nhttps://hackerone.com/reports/103930 и https://hackerone.com/reports/106633 - раскрытие некоторой информации о частных сообществах\n\nhttps://hackerone.com/reports/93322 - Раскрытие кол-во комментариев к фотографии\n\nhttps://hackerone.com/reports/92271 - Недочет в поиске по хештегам","automated_response":false,"created_at":"2016-03-05T09:35:35.028Z","updated_at":"2016-03-05T09:36:04.751Z","actor":{"username":"pisarenko","cleared":false,"url":"/pisarenko","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/032/169/02091ea1cab383fe7cf3c6240f602dcdbf1f6f6f_original.jpg/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"vkcom","actor_is_team_member":false,"actor_is_concealed_member":false}],"activity_page_count":1,"activity_page_number":1,"summaries":[{"category":"team","can_view?":true,"can_create?":false},{"id":1445,"category":"researcher","content":"███████████████████████████\n███████▀▀▀░░░░░░░▀▀▀███████\n████▀░░░░░░░░░░░░░░░░░▀████ \n███│░░░░░░░░░░░░░░░░░░░│███ \n██▌│░░░░░░░░░░░░░░░░░░░│▐██ \n██░└┐░░░░░░░░░░░░░░░░░┌┘░██ \n██░░└┐░░░░░░░░░░░░░░░┌┘░░██ \n██░░┌┘▄▄▄▄▄░░░░░▄▄▄▄▄└┐░░██ \n██▌░│██████▌░░░▐██████│░▐██ \n███░│▐███▀▀░░▄░░▀▀███▌│░███ \n██▀─┘░░░░░░░▐█▌░░░░░░░└─▀██ \n██▄░░░▄▄▄▓░░▀█▀░░▓▄▄▄░░░▄██ \n████▄─┘██▌░░░░░░░▐██└─▄████\n█████░░▐█─┬┬┬┬┬┬┬─█▌░░█████\n████▌░░░▀┬┼┼┼┼┼┼┼┬▀░░░▐████ \n█████▄░░░└┴┴┴┴┴┴┴┘░░░▄█████\n███████▄░░░░░░░░░░░▄███████ \n██████████▄▄▄▄▄▄▄██████████ \n███████████████████████████","can_view?":true,"can_create?":false,"attachments":[],"user":{"id":32169,"username":"pisarenko","name":"Alex","bio":"Can't Afford the Medication | I'm going to die ? Kill me ... | ","cleared":false,"website":"https://slack.com","location":"СМЕРТЬ БЛИЗКО , СКОЛЬКО МНЕ ЕЩЕ УМИРАТЬ ? ","created_at":"2015-05-29T21:49:58.718Z","url":"https://hackerone.com/pisarenko","anc_triager":false,"hackerone_triager":false,"hackerone_employee":false,"user_type":"hacker","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/032/169/02091ea1cab383fe7cf3c6240f602dcdbf1f6f6f_original.jpg/43e4513b9104ea0d68c9c096cea374ba8440dde3e027af5465c8771e8839a67c","medium":"https://profile-photos.hackerone-user-content.com/variants/000/032/169/02091ea1cab383fe7cf3c6240f602dcdbf1f6f6f_original.jpg/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c","xtralarge":"https://profile-photos.hackerone-user-content.com/variants/000/032/169/02091ea1cab383fe7cf3c6240f602dcdbf1f6f6f_original.jpg/c11036e2d3f8b05af4b5da5984ccdec6f786b763c8abceb4e68042e10dcdae85"}}}]}