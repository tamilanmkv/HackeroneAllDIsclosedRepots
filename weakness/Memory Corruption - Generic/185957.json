{"id":185957,"global_id":"Z2lkOi8vaGFja2Vyb25lL1JlcG9ydC8xODU5NTc=","url":"https://hackerone.com/reports/185957","title":"Crash: A call to Symbol.new leads to a crash when inspecting the resulting object","state":"Closed","substate":"resolved","severity_rating":"low","readable_substate":"Resolved","created_at":"2016-11-28T08:38:10.247Z","submitted_at":"2016-11-28T08:38:10.247Z","is_member_of_team?":false,"reporter":{"disabled":false,"username":"brakhane","url":"/brakhane","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/040/726/4b47d99eec4ee906a402afb934855158d1e6d929_original.png/43e4513b9104ea0d68c9c096cea374ba8440dde3e027af5465c8771e8839a67c"},"is_me?":false,"cleared":false,"hackerone_triager":false,"hacker_mediation":false},"team":{"id":15668,"url":"https://hackerone.com/shopify-scripts","handle":"shopify-scripts","profile_picture_urls":{"small":"https://profile-photos.hackerone-user-content.com/variants/000/015/668/ebbe467de8ef2fc936053593e1289e30f04c3b06_original.jpg/43e4513b9104ea0d68c9c096cea374ba8440dde3e027af5465c8771e8839a67c","medium":"https://profile-photos.hackerone-user-content.com/variants/000/015/668/ebbe467de8ef2fc936053593e1289e30f04c3b06_original.jpg/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"permissions":[],"submission_state":"paused","default_currency":"usd","awards_miles":false,"offers_bounties":true,"state":"public_mode","only_cleared_hackers":false,"pentest_feature_enabled?":false,"profile":{"name":"shopify-scripts","twitter_handle":"","website":"","about":""}},"has_bounty?":true,"in_validation?":false,"rejected_anc_report_that_can_be_sent_back_to_anc_triagers?":false,"can_view_team":true,"can_view_report":true,"is_external_bug":false,"is_published":false,"is_participant":false,"has_collaborators":false,"stage":4,"public":true,"visibility":"full","cve_ids":[],"singular_disclosure_disabled":false,"disclosed_at":"2016-12-16T22:20:25.461Z","bug_reporter_agreed_on_going_public_at":"2016-12-16T22:20:25.400Z","team_member_agreed_on_going_public_at":"2016-12-16T20:08:29.519Z","comments_closed?":false,"facebook_team?":false,"team_private?":false,"vulnerability_information":"Calling `Symbol.new` leads to a when `inspect` is called on that method (probably even more methods).  From my point of view the root cause is related to #185794 (the underlying boxing model).\n\nTrying the same with Ruby 2.3 will lead to a `NoMethodError: undefined method 'new' for Symbol:Class`, which is probably the right way of fixing this - `Symbol` shouldn't be a class where someone can call `new` on. However, as this relates to the boxing problems I (briefly) outlined in the other ticket (still jetlagged, sorry), a more fundamental fix might be a better choice. But that might be something Matz knows better than I do.\n\nHaving said that, it appears that `https://mruby.science/runs` isn't vulnerable to this anymore (or I'm unable to trigger it there, but that's somewhat unlikely as my sandbox does crash). So I believe the fix already done is not 'correct'. This should really be handled like any other class like `Symbol` (similar examples are `TrueClass`, `FalseClass`, `NilClass`, which all have one thing in common:\n\nThey got their new method removed by a call looking something like this:\n```\nmrb_undef_class_method(mrb, n, \"new\");\n```\n\nSo while this report is for the most part probably informative, I believe the applied fix (assuming there was a fix) is not correctly aligned with similar classes.\n\n#PoC\n```\na = Symbol.new\na.inspect # mirb will crash without this line as it calls inspect after each evaluated statement\n\n```\n\n#Trace\n```\n$ bin/sandbox crashes/symbol_new.mrb\nbin/sandbox:20: [BUG] Segmentation fault at 0x00000000000000\nruby 2.3.3p222 (2016-11-21 revision 56859) [x86_64-linux]\n\n-- Control frame information -----------------------------------------------\nc:0003 p:---- s:0010 e:000009 CFUNC  :sandbox_eval\nc:0002 p:0201 s:0005 E:001a68 EVAL   bin/sandbox:20 [FINISH]\nc:0001 p:0000 s:0002 E:0008d0 (none) [FINISH]\n\n-- Ruby level backtrace information ----------------------------------------\nbin/sandbox:20:in `\u003cmain\u003e'\nbin/sandbox:20:in `sandbox_eval'\n\n-- Machine register context ------------------------------------------------\n RIP: 0x00007f2eb6e42846 RBP: 0x00007f2eb59a84e0 RSP: 0x00007f2eb59a6aa0\n RAX: 0x00007f2eb59aefa9 RBX: 0x00007f2eb59aef90 RCX: 0x0000000000000004\n RDX: 0x0000000000000000 RDI: 0x00007f2eb59aefa9 RSI: 0x0000000000000000\n  R8: 0x00007f2eb59b94f0  R9: 0x0000000000000000 R10: 0x0000000000000218\n R11: 0x00007f2eb6e262d0 R12: 0x0000000000000000 R13: 0x0000000000000000\n R14: 0x00007f2eb59a84e0 R15: 0x00007f2eb59b3010 EFL: 0x0000000000010246\n\n-- C level backtrace information -------------------------------------------\n/usr/lib/libruby.so.2.3 [0x7f2ebaf0c455]\n/usr/lib/libruby.so.2.3 [0x7f2ebaf0c68c]\n/usr/lib/libruby.so.2.3 [0x7f2ebade6e34]\n/usr/lib/libruby.so.2.3 [0x7f2ebae986ce]\n/usr/lib/libc.so.6 [0x7f2ebaa0c0b0]\n/home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so(sym_inspect+0x66) [0x7f2eb6e42846] /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/symbol.c:410\n/home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so(mrb_vm_exec+0x762) [0x7f2eb6e32cb2] /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/vm.c:1165\n/home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so(mrb_vm_run+0x57) [0x7f2eb6e38987] /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/vm.c:766\n/home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so(mruby_engine_monitored_eval+0x113) [0x7f2eb6e17cd3] ../../../../ext/mruby_engine/eval_monitored.c:68\n/usr/lib/libpthread.so.0(start_thread+0xc4) [0x7f2eba7c3454]\n/usr/lib/libc.so.6(clone+0x5f) [0x7f2ebaac17df]\n\n-- Other runtime information -----------------------------------------------\n\n* Loaded script: bin/sandbox\n\n* Loaded features:\n\n    0 enumerator.so\n    1 thread.rb\n    2 rational.so\n    3 complex.so\n    4 /usr/lib/ruby/2.3.0/x86_64-linux/enc/encdb.so\n    5 /usr/lib/ruby/2.3.0/x86_64-linux/enc/trans/transdb.so\n    6 /usr/lib/ruby/2.3.0/unicode_normalize.rb\n    7 /usr/lib/ruby/2.3.0/x86_64-linux/rbconfig.rb\n    8 /usr/lib/ruby/2.3.0/rubygems/compatibility.rb\n    9 /usr/lib/ruby/2.3.0/rubygems/defaults.rb\n   10 /usr/lib/ruby/2.3.0/rubygems/deprecate.rb\n   11 /usr/lib/ruby/2.3.0/rubygems/errors.rb\n   12 /usr/lib/ruby/2.3.0/rubygems/version.rb\n   13 /usr/lib/ruby/2.3.0/rubygems/requirement.rb\n   14 /usr/lib/ruby/2.3.0/rubygems/platform.rb\n   15 /usr/lib/ruby/2.3.0/rubygems/basic_specification.rb\n   16 /usr/lib/ruby/2.3.0/rubygems/stub_specification.rb\n   17 /usr/lib/ruby/2.3.0/rubygems/util/list.rb\n   18 /usr/lib/ruby/2.3.0/x86_64-linux/stringio.so\n   19 /usr/lib/ruby/2.3.0/rubygems/specification.rb\n   20 /usr/lib/ruby/2.3.0/rubygems/exceptions.rb\n   21 /usr/lib/ruby/2.3.0/rubygems/dependency.rb\n   22 /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_gem.rb\n   23 /usr/lib/ruby/2.3.0/monitor.rb\n   24 /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb\n   25 /usr/lib/ruby/2.3.0/rubygems.rb\n   26 /usr/lib/ruby/2.3.0/rubygems/path_support.rb\n   27 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/version.rb\n   28 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/core_ext/name_error.rb\n   29 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/levenshtein.rb\n   30 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/jaro_winkler.rb\n   31 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/spell_checkable.rb\n   32 /usr/lib/ruby/2.3.0/delegate.rb\n   33 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/spell_checkers/name_error_checkers/class_name_checker.rb\n   34 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/spell_checkers/name_error_checkers/variable_name_checker.rb\n   35 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/spell_checkers/name_error_checkers.rb\n   36 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/spell_checkers/method_name_checker.rb\n   37 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/spell_checkers/null_checker.rb\n   38 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean/formatter.rb\n   39 /usr/lib/ruby/gems/2.3.0/gems/did_you_mean-1.0.0/lib/did_you_mean.rb\n   40 /usr/lib/ruby/2.3.0/x86_64-linux/pathname.so\n   41 /usr/lib/ruby/2.3.0/pathname.rb\n   42 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/postit_trampoline.rb\n   43 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/constants.rb\n   44 /usr/lib/ruby/2.3.0/x86_64-linux/io/console.so\n   45 /usr/lib/ruby/2.3.0/rubygems/user_interaction.rb\n   46 /usr/lib/ruby/2.3.0/x86_64-linux/etc.so\n   47 /usr/lib/ruby/2.3.0/rubygems/config_file.rb\n   48 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/rubygems_integration.rb\n   49 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/current_ruby.rb\n   50 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/shared_helpers.rb\n   51 /usr/lib/ruby/2.3.0/fileutils.rb\n   52 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/errors.rb\n   53 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/environment_preserver.rb\n   54 /usr/lib/ruby/2.3.0/x86_64-linux/socket.so\n   55 /usr/lib/ruby/2.3.0/x86_64-linux/io/wait.so\n   56 /usr/lib/ruby/2.3.0/socket.rb\n   57 /usr/lib/ruby/2.3.0/timeout.rb\n   58 /usr/lib/ruby/2.3.0/net/protocol.rb\n   59 /usr/lib/ruby/2.3.0/uri/rfc2396_parser.rb\n   60 /usr/lib/ruby/2.3.0/uri/rfc3986_parser.rb\n   61 /usr/lib/ruby/2.3.0/uri/common.rb\n   62 /usr/lib/ruby/2.3.0/uri/generic.rb\n   63 /usr/lib/ruby/2.3.0/uri/ftp.rb\n   64 /usr/lib/ruby/2.3.0/uri/http.rb\n   65 /usr/lib/ruby/2.3.0/uri/https.rb\n   66 /usr/lib/ruby/2.3.0/uri/ldap.rb\n   67 /usr/lib/ruby/2.3.0/uri/ldaps.rb\n   68 /usr/lib/ruby/2.3.0/uri/mailto.rb\n   69 /usr/lib/ruby/2.3.0/uri.rb\n   70 /usr/lib/ruby/2.3.0/x86_64-linux/zlib.so\n   71 /usr/lib/ruby/2.3.0/net/http/exceptions.rb\n   72 /usr/lib/ruby/2.3.0/net/http/header.rb\n   73 /usr/lib/ruby/2.3.0/x86_64-linux/enc/windows_31j.so\n   74 /usr/lib/ruby/2.3.0/net/http/generic_request.rb\n   75 /usr/lib/ruby/2.3.0/net/http/request.rb\n   76 /usr/lib/ruby/2.3.0/net/http/requests.rb\n   77 /usr/lib/ruby/2.3.0/net/http/response.rb\n   78 /usr/lib/ruby/2.3.0/net/http/responses.rb\n   79 /usr/lib/ruby/2.3.0/net/http/proxy_delta.rb\n   80 /usr/lib/ruby/2.3.0/net/http/backward.rb\n   81 /usr/lib/ruby/2.3.0/net/http.rb\n   82 /usr/lib/ruby/2.3.0/x86_64-linux/date_core.so\n   83 /usr/lib/ruby/2.3.0/date.rb\n   84 /usr/lib/ruby/2.3.0/time.rb\n   85 /usr/lib/ruby/2.3.0/rubygems/request/http_pool.rb\n   86 /usr/lib/ruby/2.3.0/rubygems/request/https_pool.rb\n   87 /usr/lib/ruby/2.3.0/rubygems/request/connection_pools.rb\n   88 /usr/lib/ruby/2.3.0/rubygems/request.rb\n   89 /usr/lib/ruby/2.3.0/cgi/core.rb\n   90 /usr/lib/ruby/2.3.0/x86_64-linux/cgi/escape.so\n   91 /usr/lib/ruby/2.3.0/cgi/util.rb\n   92 /usr/lib/ruby/2.3.0/cgi/cookie.rb\n   93 /usr/lib/ruby/2.3.0/cgi.rb\n   94 /usr/lib/ruby/2.3.0/rubygems/uri_formatter.rb\n   95 /usr/lib/ruby/2.3.0/x86_64-linux/digest.so\n   96 /usr/lib/ruby/2.3.0/digest.rb\n   97 /usr/lib/ruby/2.3.0/x86_64-linux/openssl.so\n   98 /usr/lib/ruby/2.3.0/openssl/bn.rb\n   99 /usr/lib/ruby/2.3.0/openssl/pkey.rb\n  100 /usr/lib/ruby/2.3.0/openssl/cipher.rb\n  101 /usr/lib/ruby/2.3.0/openssl/config.rb\n  102 /usr/lib/ruby/2.3.0/openssl/digest.rb\n  103 /usr/lib/ruby/2.3.0/openssl/x509.rb\n  104 /usr/lib/ruby/2.3.0/openssl/buffering.rb\n  105 /usr/lib/ruby/2.3.0/x86_64-linux/io/nonblock.so\n  106 /usr/lib/ruby/2.3.0/openssl/ssl.rb\n  107 /usr/lib/ruby/2.3.0/openssl.rb\n  108 /usr/lib/ruby/2.3.0/securerandom.rb\n  109 /usr/lib/ruby/2.3.0/resolv.rb\n  110 /usr/lib/ruby/2.3.0/rubygems/remote_fetcher.rb\n  111 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/gem_remote_fetcher.rb\n  112 /usr/lib/ruby/2.3.0/x86_64-linux/digest/sha1.so\n  113 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/plugin/api/source.rb\n  114 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/plugin/api.rb\n  115 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/plugin.rb\n  116 /usr/lib/ruby/2.3.0/rubygems/util.rb\n  117 /usr/lib/ruby/2.3.0/rubygems/source/git.rb\n  118 /usr/lib/ruby/2.3.0/rubygems/source/installed.rb\n  119 /usr/lib/ruby/2.3.0/rubygems/source/specific_file.rb\n  120 /usr/lib/ruby/2.3.0/rubygems/source/local.rb\n  121 /usr/lib/ruby/2.3.0/rubygems/source/lock.rb\n  122 /usr/lib/ruby/2.3.0/rubygems/source/vendor.rb\n  123 /usr/lib/ruby/2.3.0/rubygems/source.rb\n  124 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/gem_helpers.rb\n  125 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/match_platform.rb\n  126 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/rubygems_ext.rb\n  127 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/version.rb\n  128 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler.rb\n  129 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/settings.rb\n  130 /usr/lib/ruby/2.3.0/rubygems/ext/build_error.rb\n  131 /usr/lib/ruby/2.3.0/rubygems/ext/builder.rb\n  132 /usr/lib/ruby/2.3.0/rubygems/ext/configure_builder.rb\n  133 /usr/lib/ruby/2.3.0/tmpdir.rb\n  134 /usr/lib/ruby/2.3.0/tempfile.rb\n  135 /usr/lib/ruby/2.3.0/rubygems/ext/ext_conf_builder.rb\n  136 /usr/lib/ruby/2.3.0/rubygems/ext/rake_builder.rb\n  137 /usr/lib/ruby/2.3.0/optparse.rb\n  138 /usr/lib/ruby/2.3.0/rubygems/command.rb\n  139 /usr/lib/ruby/2.3.0/rubygems/ext/cmake_builder.rb\n  140 /usr/lib/ruby/2.3.0/rubygems/ext.rb\n  141 /usr/lib/ruby/2.3.0/x86_64-linux/strscan.so\n  142 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/source.rb\n  143 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/source/path.rb\n  144 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/source/git.rb\n  145 /usr/lib/ruby/2.3.0/rubygems/text.rb\n  146 /usr/lib/ruby/2.3.0/rubygems/name_tuple.rb\n  147 /usr/lib/ruby/2.3.0/rubygems/spec_fetcher.rb\n  148 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/source/rubygems.rb\n  149 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/lockfile_parser.rb\n  150 /usr/lib/ruby/2.3.0/set.rb\n  151 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/definition.rb\n  152 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/dependency.rb\n  153 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/ruby_dsl.rb\n  154 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/dsl.rb\n  155 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/source_list.rb\n  156 /home/simon/git/shopify/mruby-engine/lib/mruby_engine/version.rb\n  157 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/index.rb\n  158 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/source/gemspec.rb\n  159 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/lazy_specification.rb\n  160 /usr/lib/ruby/2.3.0/tsort.rb\n  161 /usr/lib/ruby/2.3.0/forwardable.rb\n  162 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/spec_set.rb\n  163 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/gem_version_promoter.rb\n  164 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/runtime.rb\n  165 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/ui.rb\n  166 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/ui/silent.rb\n  167 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/ui/rg_proxy.rb\n  168 /usr/lib/ruby/2.3.0/rubygems/util/licenses.rb\n  169 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/remote_specification.rb\n  170 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/dep_proxy.rb\n  171 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/gem_metadata.rb\n  172 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/errors.rb\n  173 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/action.rb\n  174 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/add_edge_no_circular.rb\n  175 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/add_vertex.rb\n  176 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/detach_vertex_named.rb\n  177 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/set_payload.rb\n  178 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/tag.rb\n  179 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/log.rb\n  180 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph/vertex.rb\n  181 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/dependency_graph.rb\n  182 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/state.rb\n  183 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/modules/specification_provider.rb\n  184 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/delegates/resolution_state.rb\n  185 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/delegates/specification_provider.rb\n  186 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/resolution.rb\n  187 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/resolver.rb\n  188 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo/modules/ui.rb\n  189 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendor/molinillo/lib/molinillo.rb\n  190 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/vendored_molinillo.rb\n  191 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/resolver.rb\n  192 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/endpoint_specification.rb\n  193 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/stub_specification.rb\n  194 /home/simon/.gem/ruby/2.3.0/gems/bundler-1.13.6/lib/bundler/setup.rb\n  195 /usr/lib/ruby/2.3.0/json/version.rb\n  196 /usr/lib/ruby/2.3.0/ostruct.rb\n  197 /usr/lib/ruby/2.3.0/json/generic_object.rb\n  198 /usr/lib/ruby/2.3.0/json/common.rb\n  199 /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16be.so\n  200 /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16le.so\n  201 /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32be.so\n  202 /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32le.so\n  203 /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/parser.so\n  204 /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/generator.so\n  205 /usr/lib/ruby/2.3.0/json/ext.rb\n  206 /usr/lib/ruby/2.3.0/json.rb\n  207 /home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so\n  208 /home/simon/git/shopify/mruby-engine/lib/mruby_engine.rb\n\n* Process memory map:\n\n00400000-00401000 r-xp 00000000 08:03 948907                             /usr/bin/ruby\n00600000-00601000 r--p 00000000 08:03 948907                             /usr/bin/ruby\n00601000-00602000 rw-p 00001000 08:03 948907                             /usr/bin/ruby\n00716000-017c3000 rw-p 00000000 00:00 0                                  [heap]\n7f2eb0000000-7f2eb0021000 rw-p 00000000 00:00 0 \n7f2eb0021000-7f2eb4000000 ---p 00000000 00:00 0 \n7f2eb46d5000-7f2eb4b37000 r--s 00000000 08:04 1838797                    /home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so\n7f2eb4b37000-7f2eb4d14000 r--s 00000000 08:03 934952                     /usr/lib/libc-2.24.so\n7f2eb4d14000-7f2eb4f90000 r--s 00000000 08:03 936075                     /usr/lib/libruby.so.2.3.0\n7f2eb4f90000-7f2eb4fa6000 r-xp 00000000 08:03 935430                     /usr/lib/libgcc_s.so.1\n7f2eb4fa6000-7f2eb51a5000 ---p 00016000 08:03 935430                     /usr/lib/libgcc_s.so.1\n7f2eb51a5000-7f2eb51a6000 r--p 00015000 08:03 935430                     /usr/lib/libgcc_s.so.1\n7f2eb51a6000-7f2eb51a7000 rw-p 00016000 08:03 935430                     /usr/lib/libgcc_s.so.1\n7f2eb51a7000-7f2eb51a8000 ---p 00000000 00:00 0 \n7f2eb51a8000-7f2eb5da8000 rw-p 00000000 00:00 0 \n7f2eb5da8000-7f2eb5daf000 r-xp 00000000 08:03 1061028                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/generator.so\n7f2eb5daf000-7f2eb5faf000 ---p 00007000 08:03 1061028                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/generator.so\n7f2eb5faf000-7f2eb5fb0000 r--p 00007000 08:03 1061028                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/generator.so\n7f2eb5fb0000-7f2eb5fb1000 rw-p 00008000 08:03 1061028                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/generator.so\n7f2eb5fb1000-7f2eb5fb2000 r-xp 00000000 08:03 948492                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32le.so\n7f2eb5fb2000-7f2eb61b1000 ---p 00001000 08:03 948492                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32le.so\n7f2eb61b1000-7f2eb61b2000 r--p 00000000 08:03 948492                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32le.so\n7f2eb61b2000-7f2eb61b3000 rw-p 00001000 08:03 948492                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32le.so\n7f2eb61b3000-7f2eb61b4000 r-xp 00000000 08:03 948496                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32be.so\n7f2eb61b4000-7f2eb63b3000 ---p 00001000 08:03 948496                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32be.so\n7f2eb63b3000-7f2eb63b4000 r--p 00000000 08:03 948496                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32be.so\n7f2eb63b4000-7f2eb63b5000 rw-p 00001000 08:03 948496                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_32be.so\n7f2eb63b5000-7f2eb63b6000 r-xp 00000000 08:03 948511                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16le.so\n7f2eb63b6000-7f2eb65b6000 ---p 00001000 08:03 948511                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16le.so\n7f2eb65b6000-7f2eb65b7000 r--p 00001000 08:03 948511                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16le.so\n7f2eb65b7000-7f2eb65b8000 rw-p 00002000 08:03 948511                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16le.so\n7f2eb65b8000-7f2eb65b9000 r-xp 00000000 08:03 948515                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16be.so\n7f2eb65b9000-7f2eb67b9000 ---p 00001000 08:03 948515                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16be.so\n7f2eb67b9000-7f2eb67ba000 r--p 00001000 08:03 948515                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16be.so\n7f2eb67ba000-7f2eb67bb000 rw-p 00002000 08:03 948515                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/utf_16be.so\n7f2eb67bb000-7f2eb67c1000 r-xp 00000000 08:03 1061029                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/parser.so\n7f2eb67c1000-7f2eb69c0000 ---p 00006000 08:03 1061029                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/parser.so\n7f2eb69c0000-7f2eb69c1000 r--p 00005000 08:03 1061029                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/parser.so\n7f2eb69c1000-7f2eb69c2000 rw-p 00006000 08:03 1061029                    /usr/lib/ruby/2.3.0/x86_64-linux/json/ext/parser.so\n7f2eb69c2000-7f2eb69e7000 r-xp 00000000 08:03 920898                     /usr/lib/liblzma.so.5.2.2\n7f2eb69e7000-7f2eb6be6000 ---p 00025000 08:03 920898                     /usr/lib/liblzma.so.5.2.2\n7f2eb6be6000-7f2eb6be7000 r--p 00024000 08:03 920898                     /usr/lib/liblzma.so.5.2.2\n7f2eb6be7000-7f2eb6be8000 rw-p 00025000 08:03 920898                     /usr/lib/liblzma.so.5.2.2\n7f2eb6be8000-7f2eb6bf3000 r-xp 00000000 08:03 944077                     /usr/lib/libunwind.so.8.0.1\n7f2eb6bf3000-7f2eb6df2000 ---p 0000b000 08:03 944077                     /usr/lib/libunwind.so.8.0.1\n7f2eb6df2000-7f2eb6df3000 r--p 0000a000 08:03 944077                     /usr/lib/libunwind.so.8.0.1\n7f2eb6df3000-7f2eb6df4000 rw-p 0000b000 08:03 944077                     /usr/lib/libunwind.so.8.0.1\n7f2eb6df4000-7f2eb6e02000 rw-p 00000000 00:00 0 \n7f2eb6e02000-7f2eb6eec000 r-xp 00000000 08:04 1838797                    /home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so\n7f2eb6eec000-7f2eb70eb000 ---p 000ea000 08:04 1838797                    /home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so\n7f2eb70eb000-7f2eb70ed000 r--p 000e9000 08:04 1838797                    /home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so\n7f2eb70ed000-7f2eb70ef000 rw-p 000eb000 08:04 1838797                    /home/simon/git/shopify/mruby-engine/lib/mruby_engine/mruby_engine.so\n7f2eb70ef000-7f2eb70f4000 r-xp 00000000 08:03 948469                     /usr/lib/ruby/2.3.0/x86_64-linux/strscan.so\n7f2eb70f4000-7f2eb72f3000 ---p 00005000 08:03 948469                     /usr/lib/ruby/2.3.0/x86_64-linux/strscan.so\n7f2eb72f3000-7f2eb72f4000 r--p 00004000 08:03 948469                     /usr/lib/ruby/2.3.0/x86_64-linux/strscan.so\n7f2eb72f4000-7f2eb72f5000 rw-p 00005000 08:03 948469                     /usr/lib/ruby/2.3.0/x86_64-linux/strscan.so\n7f2eb72f5000-7f2eb72f6000 r-xp 00000000 08:03 948523                     /usr/lib/ruby/2.3.0/x86_64-linux/digest/sha1.so\n7f2eb72f6000-7f2eb74f5000 ---p 00001000 08:03 948523                     /usr/lib/ruby/2.3.0/x86_64-linux/digest/sha1.so\n7f2eb74f5000-7f2eb74f6000 r--p 00000000 08:03 948523                     /usr/lib/ruby/2.3.0/x86_64-linux/digest/sha1.so\n7f2eb74f6000-7f2eb74f7000 rw-p 00001000 08:03 948523                     /usr/lib/ruby/2.3.0/x86_64-linux/digest/sha1.so\n7f2eb74f7000-7f2eb74f8000 r-xp 00000000 08:03 948521                     /usr/lib/ruby/2.3.0/x86_64-linux/io/nonblock.so\n7f2eb74f8000-7f2eb76f8000 ---p 00001000 08:03 948521                     /usr/lib/ruby/2.3.0/x86_64-linux/io/nonblock.so\n7f2eb76f8000-7f2eb76f9000 r--p 00001000 08:03 948521                     /usr/lib/ruby/2.3.0/x86_64-linux/io/nonblock.so\n7f2eb76f9000-7f2eb76fa000 rw-p 00002000 08:03 948521                     /usr/lib/ruby/2.3.0/x86_64-linux/io/nonblock.so\n7f2eb76fa000-7f2eb76fd000 r-xp 00000000 08:03 948452                     /usr/lib/ruby/2.3.0/x86_64-linux/digest.so\n7f2eb76fd000-7f2eb78fc000 ---p 00003000 08:03 948452                     /usr/lib/ruby/2.3.0/x86_64-linux/digest.so\n7f2eb78fc000-7f2eb78fd000 r--p 00002000 08:03 948452                     /usr/lib/ruby/2.3.0/x86_64-linux/digest.so\n7f2eb78fd000-7f2eb78fe000 rw-p 00003000 08:03 948452                     /usr/lib/ruby/2.3.0/x86_64-linux/digest.so\n7f2eb78fe000-7f2eb7b4c000 r-xp 00000000 08:03 935797                     /usr/lib/libcrypto.so.1.0.0\n7f2eb7b4c000-7f2eb7d4b000 ---p 0024e000 08:03 935797                     /usr/lib/libcrypto.so.1.0.0\n7f2eb7d4b000-7f2eb7d67000 r--p 0024d000 08:03 935797                     /usr/lib/libcrypto.so.1.0.0\n7f2eb7d67000-7f2eb7d73000 rw-p 00269000 08:03 935797                     /usr/lib/libcrypto.so.1.0.0\n7f2eb7d73000-7f2eb7d76000 rw-p 00000000 00:00 0 \n7f2eb7d76000-7f2eb7ddd000 r-xp 00000000 08:03 935796                     /usr/lib/libssl.so.1.0.0\n7f2eb7ddd000-7f2eb7fdc000 ---p 00067000 08:03 935796                     /usr/lib/libssl.so.1.0.0\n7f2eb7fdc000-7f2eb7fe0000 r--p 00066000 08:03 935796                     /usr/lib/libssl.so.1.0.0\n7f2eb7fe0000-7f2eb7fe7000 rw-p 0006a000 08:03 935796                     /usr/lib/libssl.so.1.0.0\n7f2eb7fe7000-7f2eb8036000 r-xp 00000000 08:03 948468                     /usr/lib/ruby/2.3.0/x86_64-linux/openssl.so\n7f2eb8036000-7f2eb8236000 ---p 0004f000 08:03 948468                     /usr/lib/ruby/2.3.0/x86_64-linux/openssl.so\n7f2eb8236000-7f2eb8238000 r--p 0004f000 08:03 948468                     /usr/lib/ruby/2.3.0/x86_64-linux/openssl.so\n7f2eb8238000-7f2eb823a000 rw-p 00051000 08:03 948468                     /usr/lib/ruby/2.3.0/x86_64-linux/openssl.so\n7f2eb823a000-7f2eb823b000 rw-p 00000000 00:00 0 \n7f2eb823b000-7f2eb823c000 r-xp 00000000 08:03 948519                     /usr/lib/ruby/2.3.0/x86_64-linux/cgi/escape.so\n7f2eb823c000-7f2eb843c000 ---p 00001000 08:03 948519                     /usr/lib/ruby/2.3.0/x86_64-linux/cgi/escape.so\n7f2eb843c000-7f2eb843d000 r--p 00001000 08:03 948519                     /usr/lib/ruby/2.3.0/x86_64-linux/cgi/escape.so\n7f2eb843d000-7f2eb843e000 rw-p 00002000 08:03 948519                     /usr/lib/ruby/2.3.0/x86_64-linux/cgi/escape.so\n7f2eb843e000-7f2eb846d000 r-xp 00000000 08:03 948450                     /usr/lib/ruby/2.3.0/x86_64-linux/date_core.so\n7f2eb846d000-7f2eb866d000 ---p 0002f000 08:03 948450                     /usr/lib/ruby/2.3.0/x86_64-linux/date_core.so\n7f2eb866d000-7f2eb866e000 r--p 0002f000 08:03 948450                     /usr/lib/ruby/2.3.0/x86_64-linux/date_core.so\n7f2eb866e000-7f2eb866f000 rw-p 00030000 08:03 948450                     /usr/lib/ruby/2.3.0/x86_64-linux/date_core.so\n7f2eb866f000-7f2eb8670000 rw-p 00000000 00:00 0 \n7f2eb8670000-7f2eb8673000 r-xp 00000000 08:03 948498                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/windows_31j.so\n7f2eb8673000-7f2eb8872000 ---p 00003000 08:03 948498                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/windows_31j.so\n7f2eb8872000-7f2eb8873000 r--p 00002000 08:03 948498                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/windows_31j.so\n7f2eb8873000-7f2eb8874000 rw-p 00003000 08:03 948498                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/windows_31j.so\n7f2eb8874000-7f2eb8889000 r-xp 00000000 08:03 935844                     /usr/lib/libz.so.1.2.8\n7f2eb8889000-7f2eb8a88000 ---p 00015000 08:03 935844                     /usr/lib/libz.so.1.2.8\n7f2eb8a88000-7f2eb8a89000 r--p 00014000 08:03 935844                     /usr/lib/libz.so.1.2.8\n7f2eb8a89000-7f2eb8a8a000 rw-p 00015000 08:03 935844                     /usr/lib/libz.so.1.2.8\n7f2eb8a8a000-7f2eb8a97000 r-xp 00000000 08:03 948479                     /usr/lib/ruby/2.3.0/x86_64-linux/zlib.so\n7f2eb8a97000-7f2eb8c96000 ---p 0000d000 08:03 948479                     /usr/lib/ruby/2.3.0/x86_64-linux/zlib.so\n7f2eb8c96000-7f2eb8c97000 r--p 0000c000 08:03 948479                     /usr/lib/ruby/2.3.0/x86_64-linux/zlib.so\n7f2eb8c97000-7f2eb8c98000 rw-p 0000d000 08:03 948479                     /usr/lib/ruby/2.3.0/x86_64-linux/zlib.so\n7f2eb8c98000-7f2eb8c9a000 r-xp 00000000 08:03 948520                     /usr/lib/ruby/2.3.0/x86_64-linux/io/wait.so\n7f2eb8c9a000-7f2eb8e99000 ---p 00002000 08:03 948520                     /usr/lib/ruby/2.3.0/x86_64-linux/io/wait.so\n7f2eb8e99000-7f2eb8e9a000 r--p 00001000 08:03 948520                     /usr/lib/ruby/2.3.0/x86_64-linux/io/wait.so\n7f2eb8e9a000-7f2eb8e9b000 rw-p 00002000 08:03 948520                     /usr/lib/ruby/2.3.0/x86_64-linux/io/wait.so\n7f2eb8e9b000-7f2eb8ec5000 r-xp 00000000 08:03 948454                     /usr/lib/ruby/2.3.0/x86_64-linux/socket.so\n7f2eb8ec5000-7f2eb90c4000 ---p 0002a000 08:03 948454                     /usr/lib/ruby/2.3.0/x86_64-linux/socket.so\n7f2eb90c4000-7f2eb90c5000 r--p 00029000 08:03 948454                     /usr/lib/ruby/2.3.0/x86_64-linux/socket.so\n7f2eb90c5000-7f2eb90c6000 rw-p 0002a000 08:03 948454                     /usr/lib/ruby/2.3.0/x86_64-linux/socket.so\n7f2eb90c6000-7f2eb90cc000 r-xp 00000000 08:03 948457                     /usr/lib/ruby/2.3.0/x86_64-linux/etc.so\n7f2eb90cc000-7f2eb92cb000 ---p 00006000 08:03 948457                     /usr/lib/ruby/2.3.0/x86_64-linux/etc.so\n7f2eb92cb000-7f2eb92cc000 r--p 00005000 08:03 948457                     /usr/lib/ruby/2.3.0/x86_64-linux/etc.so\n7f2eb92cc000-7f2eb92cd000 rw-p 00006000 08:03 948457                     /usr/lib/ruby/2.3.0/x86_64-linux/etc.so\n7f2eb92cd000-7f2eb92d1000 r-xp 00000000 08:03 948522                     /usr/lib/ruby/2.3.0/x86_64-linux/io/console.so\n7f2eb92d1000-7f2eb94d0000 ---p 00004000 08:03 948522                     /usr/lib/ruby/2.3.0/x86_64-linux/io/console.so\n7f2eb94d0000-7f2eb94d1000 r--p 00003000 08:03 948522                     /usr/lib/ruby/2.3.0/x86_64-linux/io/console.so\n7f2eb94d1000-7f2eb94d2000 rw-p 00004000 08:03 948522                     /usr/lib/ruby/2.3.0/x86_64-linux/io/console.so\n7f2eb94d2000-7f2eb94d8000 r-xp 00000000 08:03 948472                     /usr/lib/ruby/2.3.0/x86_64-linux/pathname.so\n7f2eb94d8000-7f2eb96d7000 ---p 00006000 08:03 948472                     /usr/lib/ruby/2.3.0/x86_64-linux/pathname.so\n7f2eb96d7000-7f2eb96d8000 r--p 00005000 08:03 948472                     /usr/lib/ruby/2.3.0/x86_64-linux/pathname.so\n7f2eb96d8000-7f2eb96d9000 rw-p 00006000 08:03 948472                     /usr/lib/ruby/2.3.0/x86_64-linux/pathname.so\n7f2eb96d9000-7f2eb96e0000 r-xp 00000000 08:03 948455                     /usr/lib/ruby/2.3.0/x86_64-linux/stringio.so\n7f2eb96e0000-7f2eb98df000 ---p 00007000 08:03 948455                     /usr/lib/ruby/2.3.0/x86_64-linux/stringio.so\n7f2eb98df000-7f2eb98e0000 r--p 00006000 08:03 948455                     /usr/lib/ruby/2.3.0/x86_64-linux/stringio.so\n7f2eb98e0000-7f2eb98e1000 rw-p 00007000 08:03 948455                     /usr/lib/ruby/2.3.0/x86_64-linux/stringio.so\n7f2eb98e1000-7f2eb98e3000 r-xp 00000000 08:03 1061025                    /usr/lib/ruby/2.3.0/x86_64-linux/enc/trans/transdb.so\n7f2eb98e3000-7f2eb9ae3000 ---p 00002000 08:03 1061025                    /usr/lib/ruby/2.3.0/x86_64-linux/enc/trans/transdb.so\n7f2eb9ae3000-7f2eb9ae4000 r--p 00002000 08:03 1061025                    /usr/lib/ruby/2.3.0/x86_64-linux/enc/trans/transdb.so\n7f2eb9ae4000-7f2eb9ae5000 rw-p 00003000 08:03 1061025                    /usr/lib/ruby/2.3.0/x86_64-linux/enc/trans/transdb.so\n7f2eb9ae5000-7f2eb9ae7000 r-xp 00000000 08:03 948512                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/encdb.so\n7f2eb9ae7000-7f2eb9ce6000 ---p 00002000 08:03 948512                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/encdb.so\n7f2eb9ce6000-7f2eb9ce7000 r--p 00001000 08:03 948512                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/encdb.so\n7f2eb9ce7000-7f2eb9ce8000 rw-p 00002000 08:03 948512                     /usr/lib/ruby/2.3.0/x86_64-linux/enc/encdb.so\n7f2eb9ce8000-7f2eb9de9000 rw-p 00000000 00:00 0 \n7f2eb9de9000-7f2eb9eec000 r-xp 00000000 08:03 935421                     /usr/lib/libm-2.24.so\n7f2eb9eec000-7f2eba0eb000 ---p 00103000 08:03 935421                     /usr/lib/libm-2.24.so\n7f2eba0eb000-7f2eba0ec000 r--p 00102000 08:03 935421                     /usr/lib/libm-2.24.so\n7f2eba0ec000-7f2eba0ed000 rw-p 00103000 08:03 935421                     /usr/lib/libm-2.24.so\n7f2eba0ed000-7f2eba0f5000 r-xp 00000000 08:03 935412                     /usr/lib/libcrypt-2.24.so\n7f2eba0f5000-7f2eba2f5000 ---p 00008000 08:03 935412                     /usr/lib/libcrypt-2.24.so\n7f2eba2f5000-7f2eba2f6000 r--p 00008000 08:03 935412                     /usr/lib/libcrypt-2.24.so\n7f2eba2f6000-7f2eba2f7000 rw-p 00009000 08:03 935412                     /usr/lib/libcrypt-2.24.so\n7f2eba2f7000-7f2eba325000 rw-p 00000000 00:00 0 \n7f2eba325000-7f2eba327000 r-xp 00000000 08:03 935420                     /usr/lib/libdl-2.24.so\n7f2eba327000-7f2eba527000 ---p 00002000 08:03 935420                     /usr/lib/libdl-2.24.so\n7f2eba527000-7f2eba528000 r--p 00002000 08:03 935420                     /usr/lib/libdl-2.24.so\n7f2eba528000-7f2eba529000 rw-p 00003000 08:03 935420                     /usr/lib/libdl-2.24.so\n7f2eba529000-7f2eba5bb000 r-xp 00000000 08:03 935607                     /usr/lib/libgmp.so.10.3.1\n7f2eba5bb000-7f2eba7ba000 ---p 00092000 08:03 935607                     /usr/lib/libgmp.so.10.3.1\n7f2eba7ba000-7f2eba7bb000 r--p 00091000 08:03 935607                     /usr/lib/libgmp.so.10.3.1\n7f2eba7bb000-7f2eba7bc000 rw-p 00092000 08:03 935607                     /usr/lib/libgmp.so.10.3.1\n7f2eba7bc000-7f2eba7d4000 r-xp 00000000 08:03 934933                     /usr/lib/libpthread-2.24.so\n7f2eba7d4000-7f2eba9d3000 ---p 00018000 08:03 934933                     /usr/lib/libpthread-2.24.so\n7f2eba9d3000-7f2eba9d4000 r--p 00017000 08:03 934933                     /usr/lib/libpthread-2.24.so\n7f2eba9d4000-7f2eba9d5000 rw-p 00018000 08:03 934933                     /usr/lib/libpthread-2.24.so\n7f2eba9d5000-7f2eba9d9000 rw-p 00000000 00:00 0 \n7f2eba9d9000-7f2ebab6e000 r-xp 00000000 08:03 934952                     /usr/lib/libc-2.24.so\n7f2ebab6e000-7f2ebad6d000 ---p 00195000 08:03 934952                     /usr/lib/libc-2.24.so\n7f2ebad6d000-7f2ebad71000 r--p 00194000 08:03 934952                     /usr/lib/libc-2.24.so\n7f2ebad71000-7f2ebad73000 rw-p 00198000 08:03 934952                     /usr/lib/libc-2.24.so\n7f2ebad73000-7f2ebad77000 rw-p 00000000 00:00 0 \n7f2ebad77000-7f2ebafeb000 r-xp 00000000 08:03 936075                     /usr/lib/libruby.so.2.3.0\n7f2ebafeb000-7f2ebb1ea000 ---p 00274000 08:03 936075                     /usr/lib/libruby.so.2.3.0\n7f2ebb1ea000-7f2ebb1f0000 r--p 00273000 08:03 936075                     /usr/lib/libruby.so.2.3.0\n7f2ebb1f0000-7f2ebb1f3000 rw-p 00279000 08:03 936075                     /usr/lib/libruby.so.2.3.0\n7f2ebb1f3000-7f2ebb204000 rw-p 00000000 00:00 0 \n7f2ebb204000-7f2ebb227000 r-xp 00000000 08:03 934951                     /usr/lib/ld-2.24.so\n7f2ebb275000-7f2ebb40d000 r--p 00000000 08:03 934978                     /usr/lib/locale/locale-archive\n7f2ebb40d000-7f2ebb413000 rw-p 00000000 00:00 0 \n7f2ebb420000-7f2ebb422000 r--s 00000000 08:03 948907                     /usr/bin/ruby\n7f2ebb422000-7f2ebb423000 ---p 00000000 00:00 0 \n7f2ebb423000-7f2ebb426000 rw-p 00000000 00:00 0 \n7f2ebb426000-7f2ebb427000 r--p 00022000 08:03 934951                     /usr/lib/ld-2.24.so\n7f2ebb427000-7f2ebb428000 rw-p 00023000 08:03 934951                     /usr/lib/ld-2.24.so\n7f2ebb428000-7f2ebb429000 rw-p 00000000 00:00 0 \n7ffcdc165000-7ffcdc964000 rw-p 00000000 00:00 0                          [stack]\n7ffcdc9c9000-7ffcdc9cb000 r--p 00000000 00:00 0                          [vvar]\n7ffcdc9cb000-7ffcdc9cd000 r-xp 00000000 00:00 0                          [vdso]\nffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\n\n\n[NOTE]\nYou may have encountered a bug in the Ruby interpreter or extension libraries.\nBug reports are welcome.\nFor details: http://www.ruby-lang.org/bugreport.html\n\n[1]    17962 abort (core dumped)  bin/sandbox crashes/symbol_new.mrb\n```\n\nGDB\n```\n$ gdb attach 17388\nGNU gdb (GDB) 7.12\nCopyright (C) 2016 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later \u003chttp://gnu.org/licenses/gpl.html\u003e\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-pc-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n\u003chttp://www.gnu.org/software/gdb/bugs/\u003e.\nFind the GDB manual and other documentation resources online at:\n\u003chttp://www.gnu.org/software/gdb/documentation/\u003e.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nattach: No such file or directory.\nAttaching to process 17388\nReading symbols from /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/build/host/bin/mirb...done.\nReading symbols from /usr/lib/libm.so.6...(no debugging symbols found)...done.\nReading symbols from /usr/lib/libreadline.so.7...(no debugging symbols found)...done.\nReading symbols from /usr/lib/libncursesw.so.6...(no debugging symbols found)...done.\nReading symbols from /usr/lib/libc.so.6...(no debugging symbols found)...done.\nReading symbols from /lib64/ld-linux-x86-64.so.2...(no debugging symbols found)...done.\n0x00007fa156930131 in pselect () from /usr/lib/libc.so.6\n(gdb) c\nContinuing.\n\nProgram received signal SIGSEGV, Segmentation fault.\nsym_inspect (mrb=0x1817010, sym=...) at /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/symbol.c:411\n411\t  if (!symname_p(name) || strlen(name) != (size_t)len) {\n(gdb) bt\n#0  sym_inspect (mrb=0x1817010, sym=...) at /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/symbol.c:411\n#1  0x0000000000410fff in mrb_funcall_with_block (mrb=mrb@entry=0x1817010, self=..., self@entry=..., mid=\u003coptimized out\u003e, mid@entry=39, \n    argc=\u003coptimized out\u003e, argc@entry=0, argv=argv@entry=0x7fff473c8ea0, blk=..., blk@entry=...)\n    at /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/vm.c:407\n#2  0x0000000000411558 in mrb_funcall_with_block (mrb=mrb@entry=0x1817010, self=..., mid=39, argc=argc@entry=0, argv=argv@entry=0x7fff473c8ea0, blk=..., \n    blk@entry=...) at /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/vm.c:334\n#3  0x00000000004115bc in mrb_funcall_argv (mrb=mrb@entry=0x1817010, self=..., self@entry=..., mid=\u003coptimized out\u003e, argc=argc@entry=0, \n    argv=argv@entry=0x7fff473c8ea0) at /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/vm.c:424\n#4  0x0000000000411810 in mrb_funcall (mrb=mrb@entry=0x1817010, self=self@entry=..., name=name@entry=0x48aae2 \"inspect\", argc=argc@entry=0)\n    at /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/src/vm.c:319\n#5  0x0000000000403132 in p (mrb=0x1817010, obj=..., prompt=1)\n    at /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/mrbgems/mruby-bin-mirb/tools/mirb/mirb.c:92\n#6  0x0000000000402e29 in main (argc=\u003coptimized out\u003e, argv=\u003coptimized out\u003e)\n    at /home/simon/git/shopify/mruby-engine/ext/mruby_engine/mruby/mrbgems/mruby-bin-mirb/tools/mirb/mirb.c:564\n(gdb)\n```","bounty_amount":"1000.0","formatted_bounty":"$1,000","weakness":{"id":2,"name":"Memory Corruption - Generic"},"original_report_id":null,"original_report_url":null,"attachments":[],"allow_singular_disclosure_at":"2017-01-15T20:08:29.570Z","allow_singular_disclosure_after":-149449665.69914353,"singular_disclosure_allowed":true,"vote_count":3,"voters":["cablej","eveeez","spetr0x"],"severity":{"rating":"low","author_type":"Team"},"structured_scope":null,"abilities":{"assignable_team_members":[],"assignable_team_member_groups":[]},"activities":[{"id":1324138,"is_internal":false,"editable":false,"type":"Activities::BugNeedsMoreInfo","message":"Hi @brakhane, and thanks for your report. I'm having some trouble reproducing this. Could you let me know exactly which version (i.e. git SHA-1 hash) of mruby-engine you reproduced the crash on, as well as the version of mruby? Thanks!","automated_response":false,"created_at":"2016-11-28T20:20:03.706Z","updated_at":"2016-11-28T20:20:03.706Z","actor":{"username":"clayton","cleared":false,"url":"/clayton","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/YKjJrQvn996bd2n67ELXwtHt/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1324341,"is_internal":false,"editable":false,"type":"Activities::BugNew","message":"Just restored my local repo to the following state:\n\nmruby-engine: 31c9341d71650924529f9236cc25ac3bcdde62d1\nmruby: 72915cab5228d62cd54c13cdb08fc19587e32865\n\nIt still works for me locally, but I might have broken my repo. Unfortunately I can't test with a fresh repo for the next 8hs or so - if you still can't reproduce it I'll start with a clean environment and report back tomorrow.","automated_response":false,"created_at":"2016-11-28T21:02:20.577Z","updated_at":"2016-11-28T21:02:20.577Z","actor":{"username":"brakhane","cleared":false,"url":"/brakhane","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/040/726/4b47d99eec4ee906a402afb934855158d1e6d929_original.png/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":1325171,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"I just cloned the mruby-engine and mruby again from master and it shows the reported behavior for me.\n\ngithub master tip right now is:\nmruby-engine: `53591f75fcfcddef30900820023c1a243b3d3240`\nmruby: `743c1e7be190eca83a08b95b0f6045cbdc9ba625`\n\nBuild with `rake compile` and crashed with the `bin/mruby-engine-mirb`.\n\nAs this doesn't work on mruby.science as well this might be something 'special' about my system here. I'm running a fully up2date Archlinux (64bit) for my research - I could give it a try on a Mac as well or give it a shot on another linux distribution if you want, just let me know. The gembox etc are all stock straight from the master branch, so I don't expect them to make any trouble here.\n\nIt could be the case however that for some reason `name` isn't a null pointer for you - have you tried breaking at `symbol.c:411` to see how the stack variables look like? For me both `name` and `len` are null.","automated_response":false,"created_at":"2016-11-29T06:03:05.991Z","updated_at":"2016-11-29T06:03:05.991Z","actor":{"username":"brakhane","cleared":false,"url":"/brakhane","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/040/726/4b47d99eec4ee906a402afb934855158d1e6d929_original.png/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":1327321,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"It doesn't crash on Ubuntu 14.04 or OS X, but I was able to reproduce it on Arch. I'll carry on investigating.","automated_response":false,"created_at":"2016-11-29T19:38:29.229Z","updated_at":"2016-11-29T19:38:29.229Z","actor":{"username":"clayton","cleared":false,"url":"/clayton","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/YKjJrQvn996bd2n67ELXwtHt/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1327343,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"That's interesting, would be cool if you could let me know if you come up with an explanation for that behavior.","automated_response":false,"created_at":"2016-11-29T19:42:24.930Z","updated_at":"2016-11-29T19:42:24.930Z","actor":{"username":"brakhane","cleared":false,"url":"/brakhane","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/040/726/4b47d99eec4ee906a402afb934855158d1e6d929_original.png/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":1329802,"is_internal":false,"editable":false,"type":"Activities::BugTriaged","message":"I suspect the difference in behaviour is due to compiler differences.\n\nThe issue has been fixed upstream: https://github.com/mruby/mruby/commit/2bb47addadb3eda796520837c21d694c8d6e3320\n\nI'll mark this as triaged for now, since we're still in the process of deploying the fix to production.","automated_response":false,"created_at":"2016-11-30T14:40:29.990Z","updated_at":"2016-11-30T14:40:29.990Z","actor":{"username":"clayton","cleared":false,"url":"/clayton","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/YKjJrQvn996bd2n67ELXwtHt/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1329807,"is_internal":false,"editable":false,"type":"Activities::ReportSeverityUpdated","message":"","automated_response":false,"created_at":"2016-11-30T14:41:34.380Z","updated_at":"2016-11-30T14:41:34.380Z","additional_data":{"old_severity":"None","new_severity":"Low","old_severity_id":9738,"new_severity_id":10502},"actor":{"username":"clayton","cleared":false,"url":"/clayton","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/YKjJrQvn996bd2n67ELXwtHt/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1351955,"is_internal":false,"editable":false,"type":"Activities::BugResolved","message":"I'm marking this a resolved now, since we've deployed a fix to our production environment.\n\nAs we mentioned in previous reports, it may be another week or two before we asses the impact and handle bounty payouts. Thank you for your patience.","automated_response":false,"created_at":"2016-12-08T21:18:16.062Z","updated_at":"2016-12-08T21:18:16.062Z","actor":{"username":"clayton","cleared":false,"url":"/clayton","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/YKjJrQvn996bd2n67ELXwtHt/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"hackerone_triager":false,"hackerone_employee":false},"reporter":{"username":"brakhane","url":"/brakhane"},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1370106,"is_internal":false,"editable":false,"type":"Activities::BountyAwarded","message":"Thanks for helping improve the security of Shopify Scripts and the mruby project!","automated_response":false,"created_at":"2016-12-16T20:08:21.812Z","updated_at":"2016-12-16T20:08:21.812Z","actor":{"url":"/shopify-scripts","ibb":false,"profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/015/668/ebbe467de8ef2fc936053593e1289e30f04c3b06_original.jpg/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"profile":{"name":"shopify-scripts"}},"bounty_amount":"1000.0","bounty_currency":"usd","genius_execution_id":null,"team_handle":"shopify-scripts","collaborator":{"username":"brakhane","url":"/brakhane"},"actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1370109,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"","automated_response":false,"created_at":"2016-12-16T20:08:29.543Z","updated_at":"2016-12-16T20:08:29.543Z","first_to_agree":true,"actor":{"username":"andrewdunbar","cleared":false,"url":"/andrewdunbar","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/019/164/5b0e89675ed6dbb9df87223e9f8f58e2125bb56b_original.jpg/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":true,"actor_is_concealed_member":false},{"id":1370173,"is_internal":false,"editable":false,"type":"Activities::Comment","message":"Thanks for the awesome bounty and the fun! Always a pleasure!","automated_response":false,"created_at":"2016-12-16T20:25:12.952Z","updated_at":"2016-12-16T20:25:12.952Z","actor":{"username":"brakhane","cleared":false,"url":"/brakhane","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/040/726/4b47d99eec4ee906a402afb934855158d1e6d929_original.png/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":1370417,"is_internal":false,"editable":false,"type":"Activities::AgreedOnGoingPublic","message":"","automated_response":false,"created_at":"2016-12-16T22:20:25.426Z","updated_at":"2016-12-16T22:20:25.426Z","actor":{"username":"brakhane","cleared":false,"url":"/brakhane","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/040/726/4b47d99eec4ee906a402afb934855158d1e6d929_original.png/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":false,"actor_is_concealed_member":false},{"id":1370418,"is_internal":false,"editable":false,"type":"Activities::ReportBecamePublic","message":"","automated_response":false,"created_at":"2016-12-16T22:20:25.492Z","updated_at":"2016-12-16T22:20:25.492Z","actor":{"username":"brakhane","cleared":false,"url":"/brakhane","profile_picture_urls":{"medium":"https://profile-photos.hackerone-user-content.com/variants/000/040/726/4b47d99eec4ee906a402afb934855158d1e6d929_original.png/fd4ecbe1e3e98c343c7717114485ace2f830f9253103d3cfa7502059868c516c"},"hackerone_triager":false,"hackerone_employee":false},"genius_execution_id":null,"team_handle":"shopify-scripts","actor_is_team_member":false,"actor_is_concealed_member":false}],"activity_page_count":1,"activity_page_number":1,"summaries":[{"category":"team","can_view?":true,"can_create?":false},{"category":"researcher","can_view?":true,"can_create?":false}]}